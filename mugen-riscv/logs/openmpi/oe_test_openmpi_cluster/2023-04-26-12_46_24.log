+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start to prepare the test environment.'
+ message='Start to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to prepare the test environment.'
Wed Apr 26 12:46:29 2023 - INFO  - Start to prepare the test environment.
+ DNF_INSTALL 'openmpi openmpi-devel nfs-utils nfs-utils-devel'
+ pkgs='openmpi openmpi-devel nfs-utils nfs-utils-devel'
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs 'openmpi openmpi-devel nfs-utils nfs-utils-devel' --node 1 --tempfile ''
+ tmpfile2=/tmp/tmp0apt78we
+ '[' -z '' ']'
+ tmpfile=/tmp/tmp0apt78we
+ SSH_CMD 'dnf -y install openmpi openmpi-devel nfs-utils nfs-utils-devel' 10.198.114.6 'openEuler12#$' root
+ cmd='dnf -y install openmpi openmpi-devel nfs-utils nfs-utils-devel'
+ remoteip=10.198.114.6
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c 'dnf -y install openmpi openmpi-devel nfs-utils nfs-utils-devel' -i 10.198.114.6 -u root -p 'openEuler12#$' -t 300 -o 22
Wed Apr 26 12:49:18 2023 - WARN  - the remote user uses the default configuration.
Wed Apr 26 12:49:19 2023 - WARN  - the remote password uses the default configuration.
Wed Apr 26 12:49:20 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@10.198.114.6 dnf -y install openmpi openmpi-devel nfs-utils nfs-utils-devel
The authenticity of host '10.198.114.6 (10.198.114.6)' can't be established.
ED25519 key fingerprint is SHA256:j2wdRtPc00KLhvK3Tj+SkYkwB1FXdanKLflYeFA0yE8.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '10.198.114.6' (ED25519) to the list of known hosts.
root@10.198.114.6's password: 
Last metadata expiration check: 12:11:54 ago on Wed 26 Apr 2023 12:37:42 AM CST.
Dependencies resolved.
================================================================================
 Package                    Arch      Version                  Repository  Size
================================================================================
Installing:
 nfs-utils                  riscv64   2:2.6.2-3.oe2303         mainline   298 k
 nfs-utils-devel            riscv64   2:2.6.2-3.oe2303         mainline    11 k
 openmpi                    riscv64   4.1.4-3.oe2303           mainline   2.1 M
 openmpi-devel              riscv64   4.1.4-3.oe2303           mainline   518 k
Installing dependencies:
 Lmod                       riscv64   8.7.4-2.oe2303           epol       244 k
 copy-jdk-configs           noarch    4.0-1.oe2303             mainline    27 k
 ding-libs                  riscv64   0.6.1-45.oe2303          mainline    90 k
 gcc-gfortran               riscv64   10.3.1-25.oe2303         mainline   8.1 M
 giflib                     riscv64   5.2.1-6.oe2303           mainline    45 k
 gssproxy                   riscv64   0.9.1-1.oe2303           mainline    91 k
 hwloc                      riscv64   2.7.1-1.oe2303           mainline   281 k
 java-11-openjdk            riscv64   1:11.0.11.9-9.oe2303     mainline   212 k
 java-11-openjdk-devel      riscv64   1:11.0.11.9-9.oe2303     mainline   3.4 M
 java-11-openjdk-headless   riscv64   1:11.0.11.9-9.oe2303     mainline    35 M
 javapackages-filesystem    noarch    5.3.0-5.oe2303           mainline    11 k
 keyutils                   riscv64   1.6.3-5.oe2303           mainline    52 k
 krb5                       riscv64   1.20.1-1.oe2303          mainline    76 k
 libfabric                  riscv64   1.16.1-1.oe2303          mainline   545 k
 libgfortran                riscv64   10.3.1-25.oe2303         mainline   368 k
 libnfsidmap                riscv64   2:2.6.2-3.oe2303         mainline    60 k
 lksctp-tools               riscv64   1.0.19-2.oe2303          mainline    61 k
 lua-filesystem             riscv64   1.8.0-1.oe2303           mainline    16 k
 lua-json                   noarch    1.3.4-1.oe2303           mainline    27 k
 lua-lpeg                   riscv64   1.0.2-2.oe2303           mainline    64 k
 lua-posix                  riscv64   35.0-1.oe2303            mainline    94 k
 lua-term                   riscv64   0.07-2.oe2303            mainline    13 k
 munge-libs                 riscv64   0.5.14-1.oe2303          mainline    36 k
 opensm                     riscv64   3.3.24-1.oe2303          mainline   471 k
 pciutils                   riscv64   3.9.0-1.oe2303           mainline   112 k
 pmix                       riscv64   4.1.2-1.oe2303           mainline   565 k
 quota                      riscv64   1:4.06-7.oe2303          mainline   232 k
 rdma-core                  riscv64   41.0-8.oe2303            mainline   838 k
 rpcbind                    riscv64   1.2.6-4.oe2303           mainline    45 k
 tzdata-java                noarch    2022g-3.oe2303           mainline   143 k
Installing weak dependencies:
 nfs-utils-help             riscv64   2:2.6.2-3.oe2303         mainline   102 k

Transaction Summary
================================================================================
Install  35 Packages

Total download size: 54 M
Installed size: 198 M
Downloading Packages:
(1/35): copy-jdk-configs-4.0-1.oe2303.noarch.rp  16 kB/s |  27 kB     00:01    
(2/35): ding-libs-0.6.1-45.oe2303.riscv64.rpm    52 kB/s |  90 kB     00:01    
(3/35): giflib-5.2.1-6.oe2303.riscv64.rpm       408 kB/s |  45 kB     00:00    
(4/35): gssproxy-0.9.1-1.oe2303.riscv64.rpm     753 kB/s |  91 kB     00:00    
(5/35): hwloc-2.7.1-1.oe2303.riscv64.rpm        859 kB/s | 281 kB     00:00    
(6/35): java-11-openjdk-11.0.11.9-9.oe2303.risc 789 kB/s | 212 kB     00:00    
(7/35): java-11-openjdk-devel-11.0.11.9-9.oe230 942 kB/s | 3.4 MB     00:03    
(8/35): javapackages-filesystem-5.3.0-5.oe2303.  23 kB/s |  11 kB     00:00    
(9/35): keyutils-1.6.3-5.oe2303.riscv64.rpm     330 kB/s |  52 kB     00:00    
(10/35): krb5-1.20.1-1.oe2303.riscv64.rpm       518 kB/s |  76 kB     00:00    
(11/35): libfabric-1.16.1-1.oe2303.riscv64.rpm  949 kB/s | 545 kB     00:00    
(12/35): libgfortran-10.3.1-25.oe2303.riscv64.r 900 kB/s | 368 kB     00:00    
(13/35): libnfsidmap-2.6.2-3.oe2303.riscv64.rpm 567 kB/s |  60 kB     00:00    
(14/35): lksctp-tools-1.0.19-2.oe2303.riscv64.r 643 kB/s |  61 kB     00:00    
(15/35): lua-filesystem-1.8.0-1.oe2303.riscv64. 350 kB/s |  16 kB     00:00    
(16/35): lua-json-1.3.4-1.oe2303.noarch.rpm     363 kB/s |  27 kB     00:00    
(17/35): lua-lpeg-1.0.2-2.oe2303.riscv64.rpm    627 kB/s |  64 kB     00:00    
(18/35): lua-posix-35.0-1.oe2303.riscv64.rpm    694 kB/s |  94 kB     00:00    
(19/35): lua-term-0.07-2.oe2303.riscv64.rpm     320 kB/s |  13 kB     00:00    
(20/35): munge-libs-0.5.14-1.oe2303.riscv64.rpm 526 kB/s |  36 kB     00:00    
(21/35): nfs-utils-2.6.2-3.oe2303.riscv64.rpm   826 kB/s | 298 kB     00:00    
(22/35): nfs-utils-devel-2.6.2-3.oe2303.riscv64 226 kB/s |  11 kB     00:00    
(23/35): nfs-utils-help-2.6.2-3.oe2303.riscv64. 710 kB/s | 102 kB     00:00    
(24/35): gcc-gfortran-10.3.1-25.oe2303.riscv64. 814 kB/s | 8.1 MB     00:10    
(25/35): openmpi-devel-4.1.4-3.oe2303.riscv64.r 915 kB/s | 518 kB     00:00    
(26/35): openmpi-4.1.4-3.oe2303.riscv64.rpm     864 kB/s | 2.1 MB     00:02    
(27/35): opensm-3.3.24-1.oe2303.riscv64.rpm     791 kB/s | 471 kB     00:00    
(28/35): pciutils-3.9.0-1.oe2303.riscv64.rpm    678 kB/s | 112 kB     00:00    
(29/35): quota-4.06-7.oe2303.riscv64.rpm        1.0 MB/s | 232 kB     00:00    
(30/35): pmix-4.1.2-1.oe2303.riscv64.rpm        982 kB/s | 565 kB     00:00    
(31/35): rpcbind-1.2.6-4.oe2303.riscv64.rpm     584 kB/s |  45 kB     00:00    
(32/35): tzdata-java-2022g-3.oe2303.noarch.rpm  646 kB/s | 143 kB     00:00    
(33/35): Lmod-8.7.4-2.oe2303.riscv64.rpm        918 kB/s | 244 kB     00:00    
(34/35): rdma-core-41.0-8.oe2303.riscv64.rpm    925 kB/s | 838 kB     00:00    
(35/35): java-11-openjdk-headless-11.0.11.9-9.o 1.7 MB/s |  35 MB     00:20    
--------------------------------------------------------------------------------
Total                                           2.4 MB/s |  54 MB     00:22     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Running scriptlet: copy-jdk-configs-4.0-1.oe2303.noarch                   1/1 
  Running scriptlet: java-11-openjdk-headless-1:11.0.11.9-9.oe2303.riscv6   1/1 
  Preparing        :                                                        1/1 
  Installing       : hwloc-2.7.1-1.oe2303.riscv64                          1/35 
  Running scriptlet: rpcbind-1.2.6-4.oe2303.riscv64                        2/35 
  Installing       : rpcbind-1.2.6-4.oe2303.riscv64                        2/35 
  Running scriptlet: rpcbind-1.2.6-4.oe2303.riscv64                        2/35 
Created symlink /etc/systemd/system/multi-user.target.wants/rpcbind.service → /usr/lib/systemd/system/rpcbind.service.
Created symlink /etc/systemd/system/sockets.target.wants/rpcbind.socket → /usr/lib/systemd/system/rpcbind.socket.

  Installing       : lua-posix-35.0-1.oe2303.riscv64                       3/35 
  Installing       : libnfsidmap-2:2.6.2-3.oe2303.riscv64                  4/35 
  Installing       : libgfortran-10.3.1-25.oe2303.riscv64                  5/35 
  Installing       : keyutils-1.6.3-5.oe2303.riscv64                       6/35 
  Installing       : gcc-gfortran-10.3.1-25.oe2303.riscv64                 7/35 
  Installing       : copy-jdk-configs-4.0-1.oe2303.noarch                  8/35 
  Installing       : quota-1:4.06-7.oe2303.riscv64                         9/35 
  Running scriptlet: quota-1:4.06-7.oe2303.riscv64                         9/35 
  Installing       : tzdata-java-2022g-3.oe2303.noarch                    10/35 
  Installing       : pciutils-3.9.0-1.oe2303.riscv64                      11/35 
  Running scriptlet: pciutils-3.9.0-1.oe2303.riscv64                      11/35 
  Installing       : rdma-core-41.0-8.oe2303.riscv64                      12/35 
  Running scriptlet: rdma-core-41.0-8.oe2303.riscv64                      12/35 
  Installing       : libfabric-1.16.1-1.oe2303.riscv64                    13/35 
  Installing       : opensm-3.3.24-1.oe2303.riscv64                       14/35 
  Running scriptlet: opensm-3.3.24-1.oe2303.riscv64                       14/35 
  Installing       : nfs-utils-help-2:2.6.2-3.oe2303.riscv64              15/35 
  Installing       : munge-libs-0.5.14-1.oe2303.riscv64                   16/35 
  Installing       : pmix-4.1.2-1.oe2303.riscv64                          17/35 
  Running scriptlet: pmix-4.1.2-1.oe2303.riscv64                          17/35 
  Installing       : lua-term-0.07-2.oe2303.riscv64                       18/35 
  Running scriptlet: lua-lpeg-1.0.2-2.oe2303.riscv64                      19/35 
  Installing       : lua-lpeg-1.0.2-2.oe2303.riscv64                      19/35 
  Running scriptlet: lua-lpeg-1.0.2-2.oe2303.riscv64                      19/35 
  Installing       : lua-json-1.3.4-1.oe2303.noarch                       20/35 
  Installing       : lua-filesystem-1.8.0-1.oe2303.riscv64                21/35 
  Installing       : Lmod-8.7.4-2.oe2303.riscv64                          22/35 
  Running scriptlet: lksctp-tools-1.0.19-2.oe2303.riscv64                 23/35 
  Installing       : lksctp-tools-1.0.19-2.oe2303.riscv64                 23/35 
  Running scriptlet: lksctp-tools-1.0.19-2.oe2303.riscv64                 23/35 
  Installing       : krb5-1.20.1-1.oe2303.riscv64                         24/35 
  Running scriptlet: krb5-1.20.1-1.oe2303.riscv64                         24/35 
  Installing       : javapackages-filesystem-5.3.0-5.oe2303.noarch        25/35 
  Installing       : java-11-openjdk-headless-1:11.0.11.9-9.oe2303.risc   26/35 
  Running scriptlet: java-11-openjdk-headless-1:11.0.11.9-9.oe2303.risc   26/35 
/var/tmp/rpm-tmp.UwUn9H: line 3:  4369 Aborted                 (core dumped) /usr/lib/jvm/java-11-openjdk-11.0.11.9-9.oe2303.riscv64/bin/java -Xshare:dump > /dev/null 2> /dev/null

  Installing       : openmpi-4.1.4-3.oe2303.riscv64                       27/35 
  Running scriptlet: openmpi-4.1.4-3.oe2303.riscv64                       27/35 
  Installing       : giflib-5.2.1-6.oe2303.riscv64                        28/35 
  Installing       : java-11-openjdk-1:11.0.11.9-9.oe2303.riscv64         29/35 
  Running scriptlet: java-11-openjdk-1:11.0.11.9-9.oe2303.riscv64         29/35 
  Installing       : java-11-openjdk-devel-1:11.0.11.9-9.oe2303.riscv64   30/35 
  Running scriptlet: java-11-openjdk-devel-1:11.0.11.9-9.oe2303.riscv64   30/35 
  Installing       : ding-libs-0.6.1-45.oe2303.riscv64                    31/35 
  Installing       : gssproxy-0.9.1-1.oe2303.riscv64                      32/35 
  Running scriptlet: gssproxy-0.9.1-1.oe2303.riscv64                      32/35 
  Running scriptlet: nfs-utils-2:2.6.2-3.oe2303.riscv64                   33/35 
  Installing       : nfs-utils-2:2.6.2-3.oe2303.riscv64                   33/35 
  Running scriptlet: nfs-utils-2:2.6.2-3.oe2303.riscv64                   33/35 
  Installing       : nfs-utils-devel-2:2.6.2-3.oe2303.riscv64             34/35 
  Installing       : openmpi-devel-4.1.4-3.oe2303.riscv64                 35/35 
  Running scriptlet: copy-jdk-configs-4.0-1.oe2303.noarch                 35/35 
  Running scriptlet: java-11-openjdk-1:11.0.11.9-9.oe2303.riscv64         35/35 
  Running scriptlet: java-11-openjdk-devel-1:11.0.11.9-9.oe2303.riscv64   35/35 
  Running scriptlet: openmpi-devel-4.1.4-3.oe2303.riscv64                 35/35 
/usr/lib/tmpfiles.d/dbus.conf:13: Line references path below legacy directory /var/run/, updating /var/run/dbus/containers → /run/dbus/containers; please update the tmpfiles.d/ drop-in file accordingly.
/usr/lib/tmpfiles.d/multipath.conf:1: Line references path below legacy directory /var/run/, updating /var/run/multipath → /run/multipath; please update the tmpfiles.d/ drop-in file accordingly.

  Verifying        : copy-jdk-configs-4.0-1.oe2303.noarch                  1/35 
  Verifying        : ding-libs-0.6.1-45.oe2303.riscv64                     2/35 
  Verifying        : gcc-gfortran-10.3.1-25.oe2303.riscv64                 3/35 
  Verifying        : giflib-5.2.1-6.oe2303.riscv64                         4/35 
  Verifying        : gssproxy-0.9.1-1.oe2303.riscv64                       5/35 
  Verifying        : hwloc-2.7.1-1.oe2303.riscv64                          6/35 
  Verifying        : java-11-openjdk-1:11.0.11.9-9.oe2303.riscv64          7/35 
  Verifying        : java-11-openjdk-devel-1:11.0.11.9-9.oe2303.riscv64    8/35 
  Verifying        : java-11-openjdk-headless-1:11.0.11.9-9.oe2303.risc    9/35 
  Verifying        : javapackages-filesystem-5.3.0-5.oe2303.noarch        10/35 
  Verifying        : keyutils-1.6.3-5.oe2303.riscv64                      11/35 
  Verifying        : krb5-1.20.1-1.oe2303.riscv64                         12/35 
  Verifying        : libfabric-1.16.1-1.oe2303.riscv64                    13/35 
  Verifying        : libgfortran-10.3.1-25.oe2303.riscv64                 14/35 
  Verifying        : libnfsidmap-2:2.6.2-3.oe2303.riscv64                 15/35 
  Verifying        : lksctp-tools-1.0.19-2.oe2303.riscv64                 16/35 
  Verifying        : lua-filesystem-1.8.0-1.oe2303.riscv64                17/35 
  Verifying        : lua-json-1.3.4-1.oe2303.noarch                       18/35 
  Verifying        : lua-lpeg-1.0.2-2.oe2303.riscv64                      19/35 
  Verifying        : lua-posix-35.0-1.oe2303.riscv64                      20/35 
  Verifying        : lua-term-0.07-2.oe2303.riscv64                       21/35 
  Verifying        : munge-libs-0.5.14-1.oe2303.riscv64                   22/35 
  Verifying        : nfs-utils-2:2.6.2-3.oe2303.riscv64                   23/35 
  Verifying        : nfs-utils-devel-2:2.6.2-3.oe2303.riscv64             24/35 
  Verifying        : nfs-utils-help-2:2.6.2-3.oe2303.riscv64              25/35 
  Verifying        : openmpi-4.1.4-3.oe2303.riscv64                       26/35 
  Verifying        : openmpi-devel-4.1.4-3.oe2303.riscv64                 27/35 
  Verifying        : opensm-3.3.24-1.oe2303.riscv64                       28/35 
  Verifying        : pciutils-3.9.0-1.oe2303.riscv64                      29/35 
  Verifying        : pmix-4.1.2-1.oe2303.riscv64                          30/35 
  Verifying        : quota-1:4.06-7.oe2303.riscv64                        31/35 
  Verifying        : rdma-core-41.0-8.oe2303.riscv64                      32/35 
  Verifying        : rpcbind-1.2.6-4.oe2303.riscv64                       33/35 
  Verifying        : tzdata-java-2022g-3.oe2303.noarch                    34/35 
  Verifying        : Lmod-8.7.4-2.oe2303.riscv64                          35/35 

Installed:
  Lmod-8.7.4-2.oe2303.riscv64                                                   
  copy-jdk-configs-4.0-1.oe2303.noarch                                          
  ding-libs-0.6.1-45.oe2303.riscv64                                             
  gcc-gfortran-10.3.1-25.oe2303.riscv64                                         
  giflib-5.2.1-6.oe2303.riscv64                                                 
  gssproxy-0.9.1-1.oe2303.riscv64                                               
  hwloc-2.7.1-1.oe2303.riscv64                                                  
  java-11-openjdk-1:11.0.11.9-9.oe2303.riscv64                                  
  java-11-openjdk-devel-1:11.0.11.9-9.oe2303.riscv64                            
  java-11-openjdk-headless-1:11.0.11.9-9.oe2303.riscv64                         
  javapackages-filesystem-5.3.0-5.oe2303.noarch                                 
  keyutils-1.6.3-5.oe2303.riscv64                                               
  krb5-1.20.1-1.oe2303.riscv64                                                  
  libfabric-1.16.1-1.oe2303.riscv64                                             
  libgfortran-10.3.1-25.oe2303.riscv64                                          
  libnfsidmap-2:2.6.2-3.oe2303.riscv64                                          
  lksctp-tools-1.0.19-2.oe2303.riscv64                                          
  lua-filesystem-1.8.0-1.oe2303.riscv64                                         
  lua-json-1.3.4-1.oe2303.noarch                                                
  lua-lpeg-1.0.2-2.oe2303.riscv64                                               
  lua-posix-35.0-1.oe2303.riscv64                                               
  lua-term-0.07-2.oe2303.riscv64                                                
  munge-libs-0.5.14-1.oe2303.riscv64                                            
  nfs-utils-2:2.6.2-3.oe2303.riscv64                                            
  nfs-utils-devel-2:2.6.2-3.oe2303.riscv64                                      
  nfs-utils-help-2:2.6.2-3.oe2303.riscv64                                       
  openmpi-4.1.4-3.oe2303.riscv64                                                
  openmpi-devel-4.1.4-3.oe2303.riscv64                                          
  opensm-3.3.24-1.oe2303.riscv64                                                
  pciutils-3.9.0-1.oe2303.riscv64                                               
  pmix-4.1.2-1.oe2303.riscv64                                                   
  quota-1:4.06-7.oe2303.riscv64                                                 
  rdma-core-41.0-8.oe2303.riscv64                                               
  rpcbind-1.2.6-4.oe2303.riscv64                                                
  tzdata-java-2022g-3.oe2303.noarch                                             

Complete!
+ ret=0
+ test 0 -ne 0
+ return 0
++ whereis openmpi
++ awk '{print$2}'
+ mpi_path=/usr/lib64/openmpi
+ echo 'export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin'
+ echo 'export LD_LIBRARY_PATH=:/usr/lib64/openmpi'
+ source /root/.bashrc
++ alias 'rm=rm -i'
++ alias 'cp=cp -i'
++ alias 'mv=mv -i'
++ '[' -f /etc/bashrc ']'
++ . /etc/bashrc
+++ '[' -z '' ']'
+++ BASHRCSOURCED=Y
+++ '[' '' ']'
+++ shopt -q login_shell
++++ umask
+++ '[' 0022 -eq 0 ']'
+++ SHELL=/bin/bash
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/00-modulepath.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/00-modulepath.sh
++++ '[' -z '' ']'
+++++ readlink /etc/alternatives/modules.sh
++++ '[' '' = /usr/share/lmod/lmod/init/profile -o -f /etc/profile.d/z00_lmod.sh ']'
++++ :
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/alias.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/alias.sh
++++ alias '..=cd ..'
++++ alias '...=cd ../..'
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/color_grep.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/color_grep.sh
++++ /usr/libexec/grepconf.sh -c
++++ alias 'grep=grep --color=auto'
++++ alias 'egrep=egrep --color=auto'
++++ alias 'fgrep=fgrep --color=auto'
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/colorls.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/colorls.sh
++++ '[' '!' -t 0 ']'
++++ return
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/colorxzgrep.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/colorxzgrep.sh
++++ /usr/libexec/grepconf.sh -c
++++ alias 'xzgrep=xzgrep --color=auto'
++++ alias 'xzegrep=xzegrep --color=auto'
++++ alias 'xzfgrep=xzfgrep --color=auto'
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/colorzgrep.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/colorzgrep.sh
++++ '[' -f /usr/libexec/grepconf.sh ']'
++++ /usr/libexec/grepconf.sh -c
++++ alias 'zgrep=zgrep --color=auto'
++++ alias 'zfgrep=zfgrep --color=auto'
++++ alias 'zegrep=zegrep --color=auto'
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/gawk.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/gawk.sh
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/lang.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/lang.sh
++++ unset LANG_backup
+++++ /usr/bin/locale
++++ '[' -n '' ']'
++++ LANG_backup=en_US.UTF-8
++++ for config in /etc/locale.conf "${HOME}/.i18n"
++++ '[' -f /etc/locale.conf ']'
++++ '[' -x /usr/bin/sed ']'
+++++ /usr/bin/sed -r -e 's/^[[:blank:]]*([[:upper:]_]+)=([[:print:][:digit:]\._-]+|"[[:print:][:digit:]\._-]+")/export \1=\2/;t;d' /etc/locale.conf
++++ eval export LANG=en_US.UTF-8
+++++ export LANG=en_US.UTF-8
+++++ LANG=en_US.UTF-8
++++ for config in /etc/locale.conf "${HOME}/.i18n"
++++ '[' -f /root/.i18n ']'
++++ '[' -n en_US.UTF-8 ']'
++++ LANG=en_US.UTF-8
++++ unset LANG_backup config
++++ '[' -n '' ']'
++++ '[' -n en_US.UTF-8 ']'
++++ '[' unknown = linux ']'
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/system-info.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/system-info.sh
+++++ uname -r
++++ welcome=6.1.8-3.oe2303.riscv64
+++++ cat /proc/meminfo
+++++ awk '/^MemTotal:/ {printf($2)}'
++++ memory_total=4031432
+++++ awk '/^MemFree:/ { printf($2)}'
+++++ cat /proc/meminfo
++++ memory_free=3342444
+++++ awk '/^Buffers:/ { printf($2)}'
+++++ cat /proc/meminfo
++++ buffers=30572
+++++ awk '/^Cached:/ { printf($2)}'
+++++ cat /proc/meminfo
++++ cached=473692
+++++ awk '/^SReclaimable:/ { printf($2)}'
+++++ cat /proc/meminfo
++++ sreclaimable=46212
+++++ cat /proc/meminfo
+++++ awk '/^SwapTotal:/ { printf($2)}'
++++ swap_total=0
+++++ cat /proc/meminfo
+++++ awk '/^SwapFree:/ { printf($2)}'
++++ swap_free=0
++++ [[ 4031432 -gt 0 ]]
+++++ echo 'scale=1; (4031432 - 3342444 - 30572 - 473692 - 46212) * 100.0 / 4031432'
+++++ bc
++++ memory_usage=3.4
++++ memory_usage=3.4%
++++ [[ 0 -gt 0 ]]
++++ swap_mem=0.0%
+++++ df -h /
+++++ awk '/\// {print $(NF-1)}'
++++ usageof=27%
+++++ awk '{print $1}' /proc/loadavg
++++ load_average=1.58
+++++ whoami
++++ whoiam=root
+++++ date
++++ time_cur='Wed Apr 26 12:52:10 PM CST 2023'
+++++ wc -l
+++++ ps aux
++++ processes=117
+++++ users
+++++ wc -w
++++ user_num=0
++++ ip_pre=
++++ '[' -x /sbin/ip ']'
+++++ /sbin/ip a
+++++ grep inet
+++++ awk '{print $2}'
+++++ grep -v inet6
+++++ grep -v 127.0.0.1
++++ ip_pre='10.198.114.3/24
10.0.2.15/24'
++++ echo -e '\n'
++++ echo -e 'Welcome to 6.1.8-3.oe2303.riscv64\n'
++++ echo -e 'System information as of time: \tWed Apr 26 12:52:10 PM CST 2023\n'
++++ echo -e 'System load: \t\033[0;33;40m1.58\033[0m'
++++ echo -e 'Processes: \t117'
++++ echo -e 'Memory used: \t3.4%'
++++ echo -e 'Swap used: \t0.0%'
++++ echo -e 'Usage On: \t27%'
++++ for line in $ip_pre
++++ ip_address=10.198.114.3
++++ echo -e 'IP address: \t10.198.114.3'
++++ for line in $ip_pre
++++ ip_address=10.0.2.15
++++ echo -e 'IP address: \t10.0.2.15'
++++ echo -e 'Users online: \t0'
++++ '[' root = root ']'
++++ echo -e '\n'
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/vte.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/vte.sh
++++ '[' -n '5.1.9(1)-release' -o -n '' ']'
++++ [[ hxB == *i* ]]
++++ return 0
+++ unset i
+++ unset -f pathmunge
++ export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin
++ PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin
++ export LD_LIBRARY_PATH=:/usr/lib64/openmpi
++ LD_LIBRARY_PATH=:/usr/lib64/openmpi
+ hostname node1
+ echo '10.198.114.3 node1'
+ echo '10.198.114.6 node2'
+ SSH_CMD '
    echo '\''export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin:/usr/lib64/openmpi/bin\nexport LD_LIBRARY_PATH=:/usr/lib64/openmpi:/usr/lib64/openmpi'\'' >> ~/.bashrc
    source ~/.bashrc
    hostname node2;
    echo '\''10.198.114.3 node1\n10.198.114.6 node2'\'' >> /etc/hosts;
    ' 10.198.114.6 'openEuler12#$' root
+ cmd='
    echo '\''export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin:/usr/lib64/openmpi/bin\nexport LD_LIBRARY_PATH=:/usr/lib64/openmpi:/usr/lib64/openmpi'\'' >> ~/.bashrc
    source ~/.bashrc
    hostname node2;
    echo '\''10.198.114.3 node1\n10.198.114.6 node2'\'' >> /etc/hosts;
    '
+ remoteip=10.198.114.6
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c '
    echo '\''export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin:/usr/lib64/openmpi/bin\nexport LD_LIBRARY_PATH=:/usr/lib64/openmpi:/usr/lib64/openmpi'\'' >> ~/.bashrc
    source ~/.bashrc
    hostname node2;
    echo '\''10.198.114.3 node1\n10.198.114.6 node2'\'' >> /etc/hosts;
    ' -i 10.198.114.6 -u root -p 'openEuler12#$' -t 300 -o 22
Wed Apr 26 12:52:12 2023 - WARN  - the remote user uses the default configuration.
Wed Apr 26 12:52:13 2023 - WARN  - the remote password uses the default configuration.
Wed Apr 26 12:52:14 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@10.198.114.6 
    echo 'export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin:/usr/lib64/openmpi/bin
export LD_LIBRARY_PATH=:/usr/lib64/openmpi:/usr/lib64/openmpi' >> ~/.bashrc
    source ~/.bashrc
    hostname node2;
    echo '10.198.114.3 node1
10.198.114.6 node2' >> /etc/hosts;
    
root@10.198.114.6's password: 
+ ret=0
+ test 0 -ne 0
+ return 0
+ ping -c 3 node2
PING node2 (10.198.114.6) 56(84) bytes of data.
64 bytes from node2 (10.198.114.6): icmp_seq=1 ttl=64 time=1.60 ms
64 bytes from node2 (10.198.114.6): icmp_seq=2 ttl=64 time=0.723 ms
64 bytes from node2 (10.198.114.6): icmp_seq=3 ttl=64 time=0.777 ms

--- node2 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2010ms
rtt min/avg/max/mdev = 0.723/1.031/1.595/0.398 ms
+ SSH_CMD 'ping -c 3 node1;rm -rf ~/.ssh/*;
    ' 10.198.114.6 'openEuler12#$' root
+ cmd='ping -c 3 node1;rm -rf ~/.ssh/*;
    '
+ remoteip=10.198.114.6
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c 'ping -c 3 node1;rm -rf ~/.ssh/*;
    ' -i 10.198.114.6 -u root -p 'openEuler12#$' -t 300 -o 22
Wed Apr 26 12:52:21 2023 - WARN  - the remote user uses the default configuration.
Wed Apr 26 12:52:22 2023 - WARN  - the remote password uses the default configuration.
Wed Apr 26 12:52:23 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@10.198.114.6 ping -c 3 node1;rm -rf ~/.ssh/*;
    
root@10.198.114.6's password: 
PING node1 (10.198.114.3) 56(84) bytes of data.
64 bytes from node1 (10.198.114.3): icmp_seq=1 ttl=64 time=1.67 ms
64 bytes from node1 (10.198.114.3): icmp_seq=2 ttl=64 time=0.513 ms
64 bytes from node1 (10.198.114.3): icmp_seq=3 ttl=64 time=0.535 ms

--- node1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2007ms
rtt min/avg/max/mdev = 0.513/0.906/1.672/0.541 ms
+ ret=0
+ test 0 -ne 0
+ return 0
+ rm -rf /root/.ssh/known_hosts /root/.ssh/known_hosts.old
+ ssh-keygen -t rsa -P '' -f /root/.ssh/id_rsa
Generating public/private rsa key pair.
Your identification has been saved in /root/.ssh/id_rsa
Your public key has been saved in /root/.ssh/id_rsa.pub
The key fingerprint is:
SHA256:1VbVFDZf06CDGygkFJq80Z2oU6BAf1pqyXo1ZDktp4E root@node1
The key's randomart image is:
+---[RSA 3072]----+
|o...+..       oOB|
|.o.=.=o. . o o. B|
|. =E+X+o. + =   .|
|  .=O *. . + .   |
|  +* +  S .      |
|  o.. .          |
| . .             |
|  .              |
|                 |
+----[SHA256]-----+
+ test -f /root/.ssh/id_rsa.pub
+ expect '-c
        log_file testlog
        spawn ssh-copy-id -i /root/.ssh/id_rsa.pub node2
        expect {
                "*)?"  {
                        send "yes\r"
                        exp_continue
                }
                "*assword:*"  {
                        send "openEuler12#$\r"
                        exp_continue
                }
    }
    '
spawn ssh-copy-id -i /root/.ssh/id_rsa.pub node2
/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"
yes
The authenticity of host 'node2 (10.198.114.6)' can't be established.
ED25519 key fingerprint is SHA256:j2wdRtPc00KLhvK3Tj+SkYkwB1FXdanKLflYeFA0yE8.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
yes
/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
yes
root@node2's password: 

Number of key(s) added: 1

Now try logging into the machine, with:   "ssh 'node2'"
and check to make sure that only the key(s) you wanted were added.

yes
+ rm -rf /home/mpi_volumn
+ mkdir -p /home/mpi_volumn
+ echo '/home/mpi_volumn 10.198.114.3 (rw,sync,no_root_squash,no_subtree_check,insecure)'
+ systemctl start nfs
+ systemctl stop firewalld
Failed to stop firewalld.service: Unit firewalld.service not loaded.
+ iptable -F
oe_test_openmpi_cluster.sh: line 65: iptable: command not found
+ SSH_CMD '
    rm -rf /home/mpi_volumn && mkdir -p /home/mpi_volumn;
    systemctl stop firewalld;
    mount -t nfs 10.198.114.3:/home/mpi_volumn /home/mpi_volumn;
    ' 10.198.114.6 'openEuler12#$' root
+ cmd='
    rm -rf /home/mpi_volumn && mkdir -p /home/mpi_volumn;
    systemctl stop firewalld;
    mount -t nfs 10.198.114.3:/home/mpi_volumn /home/mpi_volumn;
    '
+ remoteip=10.198.114.6
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c '
    rm -rf /home/mpi_volumn && mkdir -p /home/mpi_volumn;
    systemctl stop firewalld;
    mount -t nfs 10.198.114.3:/home/mpi_volumn /home/mpi_volumn;
    ' -i 10.198.114.6 -u root -p 'openEuler12#$' -t 300 -o 22
Wed Apr 26 12:52:52 2023 - WARN  - the remote user uses the default configuration.
Wed Apr 26 12:52:53 2023 - WARN  - the remote password uses the default configuration.
Wed Apr 26 12:52:54 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@10.198.114.6 
    rm -rf /home/mpi_volumn && mkdir -p /home/mpi_volumn;
    systemctl stop firewalld;
    mount -t nfs 10.198.114.3:/home/mpi_volumn /home/mpi_volumn;
    
The authenticity of host '10.198.114.6 (10.198.114.6)' can't be established.
ED25519 key fingerprint is SHA256:j2wdRtPc00KLhvK3Tj+SkYkwB1FXdanKLflYeFA0yE8.
This host key is known by the following other names/addresses:
    ~/.ssh/known_hosts:1: node2
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '10.198.114.6' (ED25519) to the list of known hosts.
Failed to stop firewalld.service: Unit firewalld.service not loaded.
send: spawn id exp3 not open
    while executing
"send "openEuler12#$\r""
    invoked from within
"expect {
            "Are you sure you want to continue connecting*"
            {
                send "yes\r"
                expect "*\[P|p]assword..."
+ ret=1
+ test 1 -ne 0
+ LOG_ERROR 'Failed in remote CMD operation:1'
+ message='Failed in remote CMD operation:1'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'Failed in remote CMD operation:1'
Wed Apr 26 12:53:00 2023 - ERROR - Failed in remote CMD operation:1
+ return 1
+ touch /home/mpi_volumn/hello_world
+ SSH_CMD 'test -f /home/mpi_volumn/hello_world || exit 1;
    ' 10.198.114.6 'openEuler12#$' root
+ cmd='test -f /home/mpi_volumn/hello_world || exit 1;
    '
+ remoteip=10.198.114.6
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c 'test -f /home/mpi_volumn/hello_world || exit 1;
    ' -i 10.198.114.6 -u root -p 'openEuler12#$' -t 300 -o 22
Wed Apr 26 12:53:01 2023 - WARN  - the remote user uses the default configuration.
Wed Apr 26 12:53:02 2023 - WARN  - the remote password uses the default configuration.
Wed Apr 26 12:53:02 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@10.198.114.6 test -f /home/mpi_volumn/hello_world || exit 1;
    
+ ret=0
+ test 0 -ne 0
+ return 0
+ cp -rf ./test.c /home/mpi_volumn/
+++ dirname oe_test_openmpi_cluster.sh
++ cd .
++ pwd
+ casepath=/root/mugen/testcases/cli-test/openmpi
+ LOG_INFO 'Finish preparing the test environment.'
+ message='Finish preparing the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish preparing the test environment.'
Wed Apr 26 12:53:07 2023 - INFO  - Finish preparing the test environment.
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Wed Apr 26 12:53:08 2023 - INFO  - Start to run test.
+ cd /home/mpi_volumn/
+ mpicc test.c -o testfile
+ test -f testfile
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ mpirun --allow-run-as-root -np 2 -host node1,node2 ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 2 -eq 2
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ printf 'node1 slots=2\nnode2 slots=2'
++ mpirun --allow-run-as-root --oversubscribe -np 4 -hostfile myhostfile ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 4 -eq 4
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ mpirun --allow-run-as-root --oversubscribe -np 2 -H node1,node2 -npersocket 1 ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 2 -eq 2
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ mpirun --allow-run-as-root --oversubscribe -np 2 -H node1,node2 -npernode 1 ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 1 -eq 2
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 100'
+ message='oe_test_openmpi_cluster.sh line 100'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 100'
Wed Apr 26 12:53:45 2023 - ERROR - oe_test_openmpi_cluster.sh line 100
+ '[' 0 -eq 1 ']'
+ return 0
++ grep -c -e 'processor node1' -e 'processor node2'
++ mpirun --allow-run-as-root --oversubscribe -np 2 -H node1,node2 -pernode ./testfile
+ test 1 -eq 2
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 103'
+ message='oe_test_openmpi_cluster.sh line 103'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 103'
Wed Apr 26 12:53:53 2023 - ERROR - oe_test_openmpi_cluster.sh line 103
+ '[' 0 -eq 1 ']'
+ return 0
++ grep -c -e 'processor node1' -e 'processor node2'
++ mpirun --allow-run-as-root --oversubscribe -np 4 --byslot --hostfile myhostfile ./testfile
+ test 2 -eq 4
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 106'
+ message='oe_test_openmpi_cluster.sh line 106'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 106'
Wed Apr 26 12:54:03 2023 - ERROR - oe_test_openmpi_cluster.sh line 106
+ '[' 0 -eq 1 ']'
+ return 0
++ mpirun --allow-run-as-root --mca rmaps_base_schedule_policy slot -np 4 ./testfile
++ grep -c 'processor node1'
+ test 0 -eq 4
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 109'
+ message='oe_test_openmpi_cluster.sh line 109'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 109'
Wed Apr 26 12:54:07 2023 - ERROR - oe_test_openmpi_cluster.sh line 109
+ '[' 0 -eq 1 ']'
+ return 0
++ mpirun --allow-run-as-root --oversubscribe -np 4 --bynode --hostfile myhostfile ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 2 -eq 4
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 112'
+ message='oe_test_openmpi_cluster.sh line 112'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 112'
Wed Apr 26 12:54:16 2023 - ERROR - oe_test_openmpi_cluster.sh line 112
+ '[' 0 -eq 1 ']'
+ return 0
++ mpirun --allow-run-as-root --mca rmaps_base_schedule_policy node -np 4 ./testfile
++ grep -c 'processor node1'
+ test 0 -eq 4
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 115'
+ message='oe_test_openmpi_cluster.sh line 115'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 115'
Wed Apr 26 12:54:21 2023 - ERROR - oe_test_openmpi_cluster.sh line 115
+ '[' 0 -eq 1 ']'
+ return 0
+ mkdir /tmp/bak_mpi_volumn
+ cp -r /home/mpi_volumn/testfile /tmp/bak_mpi_volumn
++ mpirun --allow-run-as-root --wdir /tmp/bak_mpi_volumn ./testfile
++ grep -c 'processor node1'
+ test 0 -eq 4
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 120'
+ message='oe_test_openmpi_cluster.sh line 120'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 120'
Wed Apr 26 12:54:26 2023 - ERROR - oe_test_openmpi_cluster.sh line 120
+ '[' 0 -eq 1 ']'
+ return 0
+ mpirun --allow-run-as-root -d ./testfile
+ grep MPIR_debug_state
  MPIR_debug_state = 1
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ mpirun --allow-run-as-root -np 4 --report-bindings --map-by core --bind-to core ./testfile
++ grep -c core
+ test 4 -eq 4
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ printf 'rank 0=node1 slot=1\nrank 1=node2 slot=1'
++ mpirun --allow-run-as-root --oversubscribe -H node1,node2 -rf myrankfile ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 1 -eq 2
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 129'
+ message='oe_test_openmpi_cluster.sh line 129'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 129'
Wed Apr 26 12:54:48 2023 - ERROR - oe_test_openmpi_cluster.sh line 129
+ '[' 0 -eq 1 ']'
+ return 0
++ mpirun --allow-run-as-root --prefix /usr/lib64/openmpi -H node2 ./testfile
++ grep -c 'processor node2'
+ test 1 -eq 1
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ ompi-clean -v
+ grep 'cleaning session'
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 134'
+ message='oe_test_openmpi_cluster.sh line 134'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 134'
Wed Apr 26 12:54:57 2023 - ERROR - oe_test_openmpi_cluster.sh line 134
+ '[' 0 -eq 1 ']'
+ return 0
+ ompi-clean -d
+ grep 'user(pid)=0'
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 136'
+ message='oe_test_openmpi_cluster.sh line 136'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 136'
Wed Apr 26 12:54:58 2023 - ERROR - oe_test_openmpi_cluster.sh line 136
+ '[' 0 -eq 1 ']'
+ return 0
+ SLEEP_WAIT 1
+ wait_time=1
+ cmd=
+ mode=1
+ ompi-dvm --allow-run-as-root -report-uri dvm_uri
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 1 --cmd '' --mode 1
+ grep 10.198.114.3 dvm_uri
grep: dvm_uri: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 140'
+ message='oe_test_openmpi_cluster.sh line 140'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 140'
Wed Apr 26 12:55:01 2023 - ERROR - oe_test_openmpi_cluster.sh line 140
+ '[' 0 -eq 1 ']'
+ return 0
+ SLEEP_WAIT 1
+ wait_time=1
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 1 --cmd '' --mode 1
+ ompi-server -d
+ grep 'up and running' ./ompi-server.result
[openeuler-riscv64:06155] [[33314,0],0] orte-server: up and running!
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ ompi-server -r server_uri
+ SLEEP_WAIT 1
+ wait_time=1
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 1 --cmd '' --mode 1
+ grep 10.198.114.3 server_uri
2184314880.0;tcp://10.198.114.3,10.0.2.15:57313
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'End of the test.'
+ message='End of the test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End of the test.'
Wed Apr 26 12:55:06 2023 - INFO  - End of the test.
+ CASE_RESULT 0
+ case_re=0
+ test -z 11
+ test 11 -gt 0
+ LOG_ERROR 'failed to execute the case.'
+ message='failed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'failed to execute the case.'
Wed Apr 26 12:55:07 2023 - ERROR - failed to execute the case.
+ exit 11
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Wed Apr 26 12:55:08 2023 - INFO  - Start to restore the test environment.
+ pkill -9 ompi
oe_test_openmpi_cluster.sh: line 152:  6155 Killed                  ompi-server -d > ./ompi-server.result 2>&1
+ cd /root/mugen/testcases/cli-test/openmpi
+ hostname localhost
+ rm -rf /home/mpi_volumn /etc/exports ./testlog /tmp/bak_mpi_volumn
+ sed -i /node/d /etc/hosts
+ sed -i /openmpi/d /root/.bashrc
+ source /root/.bashrc
++ alias 'rm=rm -i'
++ alias 'cp=cp -i'
++ alias 'mv=mv -i'
++ '[' -f /etc/bashrc ']'
++ . /etc/bashrc
+++ '[' -z Y ']'
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmp0apt78we ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmp0apt78we
+ '[' 0 -ne 0 ']'
+ SSH_CMD 'umount -f /home/mpi_volumn;
    hostname localhost;sed -i '\''/node/d'\'' /etc/hosts;
    sed -i '\''/openmpi/d'\'' ~/.bashrc
    source ~/.bashrc
    ' 10.198.114.6 'openEuler12#$' root
+ cmd='umount -f /home/mpi_volumn;
    hostname localhost;sed -i '\''/node/d'\'' /etc/hosts;
    sed -i '\''/openmpi/d'\'' ~/.bashrc
    source ~/.bashrc
    '
+ remoteip=10.198.114.6
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c 'umount -f /home/mpi_volumn;
    hostname localhost;sed -i '\''/node/d'\'' /etc/hosts;
    sed -i '\''/openmpi/d'\'' ~/.bashrc
    source ~/.bashrc
    ' -i 10.198.114.6 -u root -p 'openEuler12#$' -t 300 -o 22
Wed Apr 26 12:55:52 2023 - WARN  - the remote user uses the default configuration.
Wed Apr 26 12:55:53 2023 - WARN  - the remote password uses the default configuration.
Wed Apr 26 12:55:54 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@10.198.114.6 umount -f /home/mpi_volumn;
    hostname localhost;sed -i '/node/d' /etc/hosts;
    sed -i '/openmpi/d' ~/.bashrc
    source ~/.bashrc
    
+ ret=0
+ test 0 -ne 0
+ return 0
+ REMOTE_REBOOT_WAIT 10.198.114.6 'openEuler12#$' root
+ node=10.198.114.6
+ waittime='openEuler12#$'
+ '[' 'openEuler12#$x' '!=' x ']'
+ python3 /root/mugen/libs/locallibs/remote_reboot.py wait --node 10.198.114.6 --waittime 'openEuler12#$'
usage: remote_reboot.py reboot|wait [-h] [--node NODE]
remote_reboot.py: error: argument --node: invalid int value: '10.198.114.6'
+ LOG_INFO 'Finish restoring the test environment.'
+ message='Finish restoring the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish restoring the test environment.'
Wed Apr 26 12:56:07 2023 - INFO  - Finish restoring the test environment.
