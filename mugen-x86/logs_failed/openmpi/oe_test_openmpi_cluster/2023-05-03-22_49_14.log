+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start to prepare the test environment.'
+ message='Start to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to prepare the test environment.'
Wed May  3 22:49:16 2023 - INFO  - Start to prepare the test environment.
+ DNF_INSTALL 'openmpi openmpi-devel nfs-utils nfs-utils-devel'
+ pkgs='openmpi openmpi-devel nfs-utils nfs-utils-devel'
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs 'openmpi openmpi-devel nfs-utils nfs-utils-devel' --node 1 --tempfile ''
+ tmpfile2=/tmp/tmpur29u3qe
+ '[' -z '' ']'
+ tmpfile=/tmp/tmpur29u3qe
+ SSH_CMD 'dnf -y install openmpi openmpi-devel nfs-utils nfs-utils-devel' 10.198.114.3 'openEuler12#$' root
+ cmd='dnf -y install openmpi openmpi-devel nfs-utils nfs-utils-devel'
+ remoteip=10.198.114.3
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c 'dnf -y install openmpi openmpi-devel nfs-utils nfs-utils-devel' -i 10.198.114.3 -u root -p 'openEuler12#$' -t 300 -o 22
Wed May  3 22:51:06 2023 - WARN  - the remote user uses the default configuration.
Wed May  3 22:51:07 2023 - WARN  - the remote password uses the default configuration.
Wed May  3 22:51:07 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@10.198.114.3 dnf -y install openmpi openmpi-devel nfs-utils nfs-utils-devel
The authenticity of host '10.198.114.3 (10.198.114.3)' can't be established.
ED25519 key fingerprint is SHA256:M6IZ/zy3MxMo6/o/fy+aY4RQYnH9M5BZVPilD5Busik.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '10.198.114.3' (ED25519) to the list of known hosts.

Authorized users only. All activities may be monitored and reported.
root@10.198.114.3's password: 
Last metadata expiration check: 0:03:04 ago on Wed 03 May 2023 10:48:07 PM UTC.
Dependencies resolved.
================================================================================
 Package                   Arch    Version                    Repository   Size
================================================================================
Installing:
 nfs-utils                 x86_64  2:2.6.2-4.oe2303           OS          296 k
 nfs-utils-devel           x86_64  2:2.6.2-4.oe2303           everything   11 k
 openmpi                   x86_64  4.1.4-3.oe2303             everything  2.3 M
 openmpi-devel             x86_64  4.1.4-3.oe2303             everything  760 k
Installing dependencies:
 Lmod                      x86_64  8.7.4-2.oe2303             EPOL        243 k
 alsa-lib                  x86_64  1.2.8-1.oe2303             OS          460 k
 binutils                  x86_64  2.37-14.oe2303             OS          5.4 M
 copy-jdk-configs          noarch  4.0-1.oe2303               OS           26 k
 cpp                       x86_64  10.3.1-26.oe2303           OS          9.0 M
 ding-libs                 x86_64  0.6.1-45.oe2303            OS           93 k
 gcc                       x86_64  10.3.1-26.oe2303           OS           29 M
 gcc-gfortran              x86_64  10.3.1-26.oe2303           OS           10 M
 giflib                    x86_64  5.2.1-6.oe2303             OS           44 k
 glibc-devel               x86_64  2.36-13.oe2303             OS          2.0 M
 gssproxy                  x86_64  0.9.1-1.oe2303             OS           94 k
 hwloc                     x86_64  2.7.1-1.oe2303             OS          314 k
 infinipath-psm            x86_64  3.3-12.oe2303              everything  187 k
 java-11-openjdk           x86_64  1:11.0.18.10-1.oe2303      everything  214 k
 java-11-openjdk-devel     x86_64  1:11.0.18.10-1.oe2303      everything  3.3 M
 java-11-openjdk-headless  x86_64  1:11.0.18.10-1.oe2303      everything   39 M
 javapackages-filesystem   noarch  5.3.0-5.oe2303             OS           10 k
 kernel-headers            x86_64  6.1.19-7.0.0.17.oe2303     OS          1.5 M
 keyutils                  x86_64  1.6.3-5.oe2303             OS           53 k
 krb5                      x86_64  1.20.1-1.oe2303            OS           78 k
 libfabric                 x86_64  1.16.1-1.oe2303            everything  683 k
 libfontenc                x86_64  1.1.6-1.oe2303             OS           17 k
 libgfortran               x86_64  10.3.1-26.oe2303           OS          786 k
 libmpc                    x86_64  1.3.1-1.oe2303             OS           65 k
 libnfsidmap               x86_64  2:2.6.2-4.oe2303           OS           62 k
 libpciaccess              x86_64  0.17-1.oe2303              OS           24 k
 libpsm2                   x86_64  10.3.58-9.oe2303           everything  181 k
 libquadmath               x86_64  10.3.1-26.oe2303           OS          155 k
 libquadmath-devel         x86_64  10.3.1-26.oe2303           OS           22 k
 libxcrypt-devel           x86_64  4.4.33-1.oe2303            OS          105 k
 lksctp-tools              x86_64  1.0.19-2.oe2303            OS           60 k
 lua-filesystem            x86_64  1.8.0-1.oe2303             everything   16 k
 lua-json                  noarch  1.3.4-1.oe2303             everything   26 k
 lua-lpeg                  x86_64  1.0.2-2.oe2303             everything   64 k
 lua-posix                 x86_64  35.0-1.oe2303              OS           96 k
 lua-term                  x86_64  0.07-2.oe2303              everything   13 k
 munge-libs                x86_64  0.5.14-1.oe2303            everything   37 k
 numactl-libs              x86_64  2.0.16-3.oe2303            OS           27 k
 opensm                    x86_64  3.3.24-1.oe2303            OS          491 k
 pciutils                  x86_64  3.9.0-1.oe2303             OS          114 k
 pmix                      x86_64  4.1.2-1.oe2303             everything  605 k
 quota                     x86_64  1:4.06-7.oe2303            OS          223 k
 rdma-core                 x86_64  41.0-8.oe2303              OS          848 k
 rpcbind                   x86_64  1.2.6-5.oe2303             OS           45 k
 tzdata-java               noarch  2022g-3.oe2303             OS          142 k
 xorg-x11-font-utils       x86_64  1:7.5-44.oe2303            OS           83 k
 xorg-x11-fonts-others     noarch  7.5-25.oe2303              OS          7.4 M
Installing weak dependencies:
 nfs-utils-help            x86_64  2:2.6.2-4.oe2303           OS          101 k

Transaction Summary
================================================================================
Install  52 Packages

Total download size: 117 M
Installed size: 389 M
Downloading Packages:
(1/52): copy-jdk-configs-4.0-1.oe2303.noarch.rp  54 kB/s |  26 kB     00:00    
(2/52): alsa-lib-1.2.8-1.oe2303.x86_64.rpm      478 kB/s | 460 kB     00:00    
(3/52): ding-libs-0.6.1-45.oe2303.x86_64.rpm    464 kB/s |  93 kB     00:00    
(4/52): binutils-2.37-14.oe2303.x86_64.rpm      2.0 MB/s | 5.4 MB     00:02    
(5/52): cpp-10.3.1-26.oe2303.x86_64.rpm         2.3 MB/s | 9.0 MB     00:03    
(6/52): giflib-5.2.1-6.oe2303.x86_64.rpm        313 kB/s |  44 kB     00:00    
(7/52): glibc-devel-2.36-13.oe2303.x86_64.rpm   2.1 MB/s | 2.0 MB     00:00    
(8/52): gcc-gfortran-10.3.1-26.oe2303.x86_64.rp 3.4 MB/s |  10 MB     00:03    
(9/52): gssproxy-0.9.1-1.oe2303.x86_64.rpm      265 kB/s |  94 kB     00:00    
(10/52): javapackages-filesystem-5.3.0-5.oe2303  75 kB/s |  10 kB     00:00    
(11/52): hwloc-2.7.1-1.oe2303.x86_64.rpm        1.2 MB/s | 314 kB     00:00    
(12/52): keyutils-1.6.3-5.oe2303.x86_64.rpm     364 kB/s |  53 kB     00:00    
(13/52): krb5-1.20.1-1.oe2303.x86_64.rpm        516 kB/s |  78 kB     00:00    
(14/52): libfontenc-1.1.6-1.oe2303.x86_64.rpm   124 kB/s |  17 kB     00:00    
(15/52): kernel-headers-6.1.19-7.0.0.17.oe2303. 2.4 MB/s | 1.5 MB     00:00    
(16/52): libmpc-1.3.1-1.oe2303.x86_64.rpm       429 kB/s |  65 kB     00:00    
(17/52): libgfortran-10.3.1-26.oe2303.x86_64.rp 2.3 MB/s | 786 kB     00:00    
(18/52): libnfsidmap-2.6.2-4.oe2303.x86_64.rpm  424 kB/s |  62 kB     00:00    
(19/52): libpciaccess-0.17-1.oe2303.x86_64.rpm  168 kB/s |  24 kB     00:00    
(20/52): libquadmath-10.3.1-26.oe2303.x86_64.rp 846 kB/s | 155 kB     00:00    
(21/52): gcc-10.3.1-26.oe2303.x86_64.rpm        4.5 MB/s |  29 MB     00:06    
(22/52): libquadmath-devel-10.3.1-26.oe2303.x86  37 kB/s |  22 kB     00:00    
(23/52): libxcrypt-devel-4.4.33-1.oe2303.x86_64 189 kB/s | 105 kB     00:00    
(24/52): lksctp-tools-1.0.19-2.oe2303.x86_64.rp 428 kB/s |  60 kB     00:00    
(25/52): lua-posix-35.0-1.oe2303.x86_64.rpm     474 kB/s |  96 kB     00:00    
(26/52): nfs-utils-help-2.6.2-4.oe2303.x86_64.r 671 kB/s | 101 kB     00:00    
(27/52): nfs-utils-2.6.2-4.oe2303.x86_64.rpm    1.0 MB/s | 296 kB     00:00    
(28/52): numactl-libs-2.0.16-3.oe2303.x86_64.rp 191 kB/s |  27 kB     00:00    
(29/52): pciutils-3.9.0-1.oe2303.x86_64.rpm     717 kB/s | 114 kB     00:00    
(30/52): quota-4.06-7.oe2303.x86_64.rpm         1.1 MB/s | 223 kB     00:00    
(31/52): opensm-3.3.24-1.oe2303.x86_64.rpm      1.5 MB/s | 491 kB     00:00    
(32/52): rpcbind-1.2.6-5.oe2303.x86_64.rpm      317 kB/s |  45 kB     00:00    
(33/52): tzdata-java-2022g-3.oe2303.noarch.rpm  938 kB/s | 142 kB     00:00    
(34/52): rdma-core-41.0-8.oe2303.x86_64.rpm     2.2 MB/s | 848 kB     00:00    
(35/52): xorg-x11-font-utils-7.5-44.oe2303.x86_ 502 kB/s |  83 kB     00:00    
(36/52): infinipath-psm-3.3-12.oe2303.x86_64.rp 1.0 MB/s | 187 kB     00:00    
(37/52): java-11-openjdk-11.0.18.10-1.oe2303.x8 693 kB/s | 214 kB     00:00    
(38/52): java-11-openjdk-devel-11.0.18.10-1.oe2 3.1 MB/s | 3.3 MB     00:01    
(39/52): libfabric-1.16.1-1.oe2303.x86_64.rpm   1.8 MB/s | 683 kB     00:00    
(40/52): xorg-x11-fonts-others-7.5-25.oe2303.no 3.9 MB/s | 7.4 MB     00:01    
(41/52): libpsm2-10.3.58-9.oe2303.x86_64.rpm    967 kB/s | 181 kB     00:00    
(42/52): lua-filesystem-1.8.0-1.oe2303.x86_64.r 113 kB/s |  16 kB     00:00    
(43/52): lua-json-1.3.4-1.oe2303.noarch.rpm     185 kB/s |  26 kB     00:00    
(44/52): lua-lpeg-1.0.2-2.oe2303.x86_64.rpm     451 kB/s |  64 kB     00:00    
(45/52): lua-term-0.07-2.oe2303.x86_64.rpm       91 kB/s |  13 kB     00:00    
(46/52): munge-libs-0.5.14-1.oe2303.x86_64.rpm  252 kB/s |  37 kB     00:00    
(47/52): nfs-utils-devel-2.6.2-4.oe2303.x86_64.  79 kB/s |  11 kB     00:00    
(48/52): openmpi-devel-4.1.4-3.oe2303.x86_64.rp 1.9 MB/s | 760 kB     00:00    
(49/52): pmix-4.1.2-1.oe2303.x86_64.rpm         1.8 MB/s | 605 kB     00:00    
(50/52): openmpi-4.1.4-3.oe2303.x86_64.rpm      2.8 MB/s | 2.3 MB     00:00    
(51/52): Lmod-8.7.4-2.oe2303.x86_64.rpm         1.1 MB/s | 243 kB     00:00    
(52/52): java-11-openjdk-headless-11.0.18.10-1. 3.6 MB/s |  39 MB     00:10    
--------------------------------------------------------------------------------
Total                                           5.9 MB/s | 117 MB     00:19     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Running scriptlet: copy-jdk-configs-4.0-1.oe2303.noarch                   1/1 
  Running scriptlet: java-11-openjdk-headless-1:11.0.18.10-1.oe2303.x86_6   1/1 
  Preparing        :                                                        1/1 
  Installing       : libquadmath-10.3.1-26.oe2303.x86_64                   1/52 
  Installing       : libmpc-1.3.1-1.oe2303.x86_64                          2/52 
  Installing       : libgfortran-10.3.1-26.oe2303.x86_64                   3/52 
  Installing       : infinipath-psm-3.3-12.oe2303.x86_64                   4/52 
  Running scriptlet: infinipath-psm-3.3-12.oe2303.x86_64                   4/52 
  Running scriptlet: rpcbind-1.2.6-5.oe2303.x86_64                         5/52 
  Installing       : rpcbind-1.2.6-5.oe2303.x86_64                         5/52 
  Running scriptlet: rpcbind-1.2.6-5.oe2303.x86_64                         5/52 
Created symlink /etc/systemd/system/multi-user.target.wants/rpcbind.service → /usr/lib/systemd/system/rpcbind.service.
Created symlink /etc/systemd/system/sockets.target.wants/rpcbind.socket → /usr/lib/systemd/system/rpcbind.socket.

  Installing       : lua-posix-35.0-1.oe2303.x86_64                        6/52 
  Installing       : libnfsidmap-2:2.6.2-4.oe2303.x86_64                   7/52 
  Installing       : keyutils-1.6.3-5.oe2303.x86_64                        8/52 
  Installing       : copy-jdk-configs-4.0-1.oe2303.noarch                  9/52 
  Installing       : quota-1:4.06-7.oe2303.x86_64                         10/52 
  Running scriptlet: quota-1:4.06-7.oe2303.x86_64                         10/52 
  Installing       : cpp-10.3.1-26.oe2303.x86_64                          11/52 
  Installing       : munge-libs-0.5.14-1.oe2303.x86_64                    12/52 
  Installing       : lua-term-0.07-2.oe2303.x86_64                        13/52 
  Running scriptlet: lua-lpeg-1.0.2-2.oe2303.x86_64                       14/52 
  Installing       : lua-lpeg-1.0.2-2.oe2303.x86_64                       14/52 
  Running scriptlet: lua-lpeg-1.0.2-2.oe2303.x86_64                       14/52 
  Installing       : lua-json-1.3.4-1.oe2303.noarch                       15/52 
  Installing       : lua-filesystem-1.8.0-1.oe2303.x86_64                 16/52 
  Installing       : Lmod-8.7.4-2.oe2303.x86_64                           17/52 
  Installing       : tzdata-java-2022g-3.oe2303.noarch                    18/52 
  Installing       : pciutils-3.9.0-1.oe2303.x86_64                       19/52 
  Running scriptlet: pciutils-3.9.0-1.oe2303.x86_64                       19/52 
  Installing       : rdma-core-41.0-8.oe2303.x86_64                       20/52 
  Running scriptlet: rdma-core-41.0-8.oe2303.x86_64                       20/52 
  Installing       : opensm-3.3.24-1.oe2303.x86_64                        21/52 
  Running scriptlet: opensm-3.3.24-1.oe2303.x86_64                        21/52 
  Installing       : numactl-libs-2.0.16-3.oe2303.x86_64                  22/52 
  Running scriptlet: numactl-libs-2.0.16-3.oe2303.x86_64                  22/52 
  Installing       : libpsm2-10.3.58-9.oe2303.x86_64                      23/52 
  Running scriptlet: libpsm2-10.3.58-9.oe2303.x86_64                      23/52 
  Installing       : libfabric-1.16.1-1.oe2303.x86_64                     24/52 
  Installing       : nfs-utils-help-2:2.6.2-4.oe2303.x86_64               25/52 
  Running scriptlet: lksctp-tools-1.0.19-2.oe2303.x86_64                  26/52 
  Installing       : lksctp-tools-1.0.19-2.oe2303.x86_64                  26/52 
  Running scriptlet: lksctp-tools-1.0.19-2.oe2303.x86_64                  26/52 
  Installing       : libpciaccess-0.17-1.oe2303.x86_64                    27/52 
  Running scriptlet: libpciaccess-0.17-1.oe2303.x86_64                    27/52 
  Installing       : hwloc-2.7.1-1.oe2303.x86_64                          28/52 
  Running scriptlet: hwloc-2.7.1-1.oe2303.x86_64                          28/52 
  Installing       : pmix-4.1.2-1.oe2303.x86_64                           29/52 
  Running scriptlet: pmix-4.1.2-1.oe2303.x86_64                           29/52 
  Installing       : libfontenc-1.1.6-1.oe2303.x86_64                     30/52 
  Installing       : xorg-x11-font-utils-1:7.5-44.oe2303.x86_64           31/52 
  Installing       : xorg-x11-fonts-others-7.5-25.oe2303.noarch           32/52 
  Running scriptlet: xorg-x11-fonts-others-7.5-25.oe2303.noarch           32/52 
  Installing       : krb5-1.20.1-1.oe2303.x86_64                          33/52 
  Running scriptlet: krb5-1.20.1-1.oe2303.x86_64                          33/52 
  Installing       : kernel-headers-6.1.19-7.0.0.17.oe2303.x86_64         34/52 
  Installing       : libxcrypt-devel-4.4.33-1.oe2303.x86_64               35/52 
  Running scriptlet: glibc-devel-2.36-13.oe2303.x86_64                    36/52 
  Installing       : glibc-devel-2.36-13.oe2303.x86_64                    36/52 
  Installing       : javapackages-filesystem-5.3.0-5.oe2303.noarch        37/52 
  Installing       : giflib-5.2.1-6.oe2303.x86_64                         38/52 
  Installing       : ding-libs-0.6.1-45.oe2303.x86_64                     39/52 
  Installing       : gssproxy-0.9.1-1.oe2303.x86_64                       40/52 
  Running scriptlet: gssproxy-0.9.1-1.oe2303.x86_64                       40/52 
  Running scriptlet: nfs-utils-2:2.6.2-4.oe2303.x86_64                    41/52 
  Installing       : nfs-utils-2:2.6.2-4.oe2303.x86_64                    41/52 
  Running scriptlet: nfs-utils-2:2.6.2-4.oe2303.x86_64                    41/52 
  Installing       : binutils-2.37-14.oe2303.x86_64                       42/52 
  Running scriptlet: binutils-2.37-14.oe2303.x86_64                       42/52 
  Installing       : gcc-10.3.1-26.oe2303.x86_64                          43/52 
  Installing       : libquadmath-devel-10.3.1-26.oe2303.x86_64            44/52 
  Installing       : gcc-gfortran-10.3.1-26.oe2303.x86_64                 45/52 
  Installing       : alsa-lib-1.2.8-1.oe2303.x86_64                       46/52 
  Installing       : java-11-openjdk-headless-1:11.0.18.10-1.oe2303.x86   47/52 
  Running scriptlet: java-11-openjdk-headless-1:11.0.18.10-1.oe2303.x86   47/52 
  Installing       : java-11-openjdk-1:11.0.18.10-1.oe2303.x86_64         48/52 
  Running scriptlet: java-11-openjdk-1:11.0.18.10-1.oe2303.x86_64         48/52 
  Installing       : java-11-openjdk-devel-1:11.0.18.10-1.oe2303.x86_64   49/52 
  Running scriptlet: java-11-openjdk-devel-1:11.0.18.10-1.oe2303.x86_64   49/52 
  Installing       : openmpi-4.1.4-3.oe2303.x86_64                        50/52 
  Running scriptlet: openmpi-4.1.4-3.oe2303.x86_64                        50/52 
  Installing       : openmpi-devel-4.1.4-3.oe2303.x86_64                  51/52 
  Installing       : nfs-utils-devel-2:2.6.2-4.oe2303.x86_64              52/52 
  Running scriptlet: copy-jdk-configs-4.0-1.oe2303.noarch                 52/52 
  Running scriptlet: java-11-openjdk-1:11.0.18.10-1.oe2303.x86_64         52/52 
  Running scriptlet: java-11-openjdk-devel-1:11.0.18.10-1.oe2303.x86_64   52/52 
  Running scriptlet: nfs-utils-devel-2:2.6.2-4.oe2303.x86_64              52/52 
/usr/lib/tmpfiles.d/dbus.conf:13: Line references path below legacy directory /var/run/, updating /var/run/dbus/containers → /run/dbus/containers; please update the tmpfiles.d/ drop-in file accordingly.

  Verifying        : alsa-lib-1.2.8-1.oe2303.x86_64                        1/52 
  Verifying        : binutils-2.37-14.oe2303.x86_64                        2/52 
  Verifying        : copy-jdk-configs-4.0-1.oe2303.noarch                  3/52 
  Verifying        : cpp-10.3.1-26.oe2303.x86_64                           4/52 
  Verifying        : ding-libs-0.6.1-45.oe2303.x86_64                      5/52 
  Verifying        : gcc-10.3.1-26.oe2303.x86_64                           6/52 
  Verifying        : gcc-gfortran-10.3.1-26.oe2303.x86_64                  7/52 
  Verifying        : giflib-5.2.1-6.oe2303.x86_64                          8/52 
  Verifying        : glibc-devel-2.36-13.oe2303.x86_64                     9/52 
  Verifying        : gssproxy-0.9.1-1.oe2303.x86_64                       10/52 
  Verifying        : hwloc-2.7.1-1.oe2303.x86_64                          11/52 
  Verifying        : javapackages-filesystem-5.3.0-5.oe2303.noarch        12/52 
  Verifying        : kernel-headers-6.1.19-7.0.0.17.oe2303.x86_64         13/52 
  Verifying        : keyutils-1.6.3-5.oe2303.x86_64                       14/52 
  Verifying        : krb5-1.20.1-1.oe2303.x86_64                          15/52 
  Verifying        : libfontenc-1.1.6-1.oe2303.x86_64                     16/52 
  Verifying        : libgfortran-10.3.1-26.oe2303.x86_64                  17/52 
  Verifying        : libmpc-1.3.1-1.oe2303.x86_64                         18/52 
  Verifying        : libnfsidmap-2:2.6.2-4.oe2303.x86_64                  19/52 
  Verifying        : libpciaccess-0.17-1.oe2303.x86_64                    20/52 
  Verifying        : libquadmath-10.3.1-26.oe2303.x86_64                  21/52 
  Verifying        : libquadmath-devel-10.3.1-26.oe2303.x86_64            22/52 
  Verifying        : libxcrypt-devel-4.4.33-1.oe2303.x86_64               23/52 
  Verifying        : lksctp-tools-1.0.19-2.oe2303.x86_64                  24/52 
  Verifying        : lua-posix-35.0-1.oe2303.x86_64                       25/52 
  Verifying        : nfs-utils-2:2.6.2-4.oe2303.x86_64                    26/52 
  Verifying        : nfs-utils-help-2:2.6.2-4.oe2303.x86_64               27/52 
  Verifying        : numactl-libs-2.0.16-3.oe2303.x86_64                  28/52 
  Verifying        : opensm-3.3.24-1.oe2303.x86_64                        29/52 
  Verifying        : pciutils-3.9.0-1.oe2303.x86_64                       30/52 
  Verifying        : quota-1:4.06-7.oe2303.x86_64                         31/52 
  Verifying        : rdma-core-41.0-8.oe2303.x86_64                       32/52 
  Verifying        : rpcbind-1.2.6-5.oe2303.x86_64                        33/52 
  Verifying        : tzdata-java-2022g-3.oe2303.noarch                    34/52 
  Verifying        : xorg-x11-font-utils-1:7.5-44.oe2303.x86_64           35/52 
  Verifying        : xorg-x11-fonts-others-7.5-25.oe2303.noarch           36/52 
  Verifying        : infinipath-psm-3.3-12.oe2303.x86_64                  37/52 
  Verifying        : java-11-openjdk-1:11.0.18.10-1.oe2303.x86_64         38/52 
  Verifying        : java-11-openjdk-devel-1:11.0.18.10-1.oe2303.x86_64   39/52 
  Verifying        : java-11-openjdk-headless-1:11.0.18.10-1.oe2303.x86   40/52 
  Verifying        : libfabric-1.16.1-1.oe2303.x86_64                     41/52 
  Verifying        : libpsm2-10.3.58-9.oe2303.x86_64                      42/52 
  Verifying        : lua-filesystem-1.8.0-1.oe2303.x86_64                 43/52 
  Verifying        : lua-json-1.3.4-1.oe2303.noarch                       44/52 
  Verifying        : lua-lpeg-1.0.2-2.oe2303.x86_64                       45/52 
  Verifying        : lua-term-0.07-2.oe2303.x86_64                        46/52 
  Verifying        : munge-libs-0.5.14-1.oe2303.x86_64                    47/52 
  Verifying        : nfs-utils-devel-2:2.6.2-4.oe2303.x86_64              48/52 
  Verifying        : openmpi-4.1.4-3.oe2303.x86_64                        49/52 
  Verifying        : openmpi-devel-4.1.4-3.oe2303.x86_64                  50/52 
  Verifying        : pmix-4.1.2-1.oe2303.x86_64                           51/52 
  Verifying        : Lmod-8.7.4-2.oe2303.x86_64                           52/52 

Installed:
  Lmod-8.7.4-2.oe2303.x86_64                                                    
  alsa-lib-1.2.8-1.oe2303.x86_64                                                
  binutils-2.37-14.oe2303.x86_64                                                
  copy-jdk-configs-4.0-1.oe2303.noarch                                          
  cpp-10.3.1-26.oe2303.x86_64                                                   
  ding-libs-0.6.1-45.oe2303.x86_64                                              
  gcc-10.3.1-26.oe2303.x86_64                                                   
  gcc-gfortran-10.3.1-26.oe2303.x86_64                                          
  giflib-5.2.1-6.oe2303.x86_64                                                  
  glibc-devel-2.36-13.oe2303.x86_64                                             
  gssproxy-0.9.1-1.oe2303.x86_64                                                
  hwloc-2.7.1-1.oe2303.x86_64                                                   
  infinipath-psm-3.3-12.oe2303.x86_64                                           
  java-11-openjdk-1:11.0.18.10-1.oe2303.x86_64                                  
  java-11-openjdk-devel-1:11.0.18.10-1.oe2303.x86_64                            
  java-11-openjdk-headless-1:11.0.18.10-1.oe2303.x86_64                         
  javapackages-filesystem-5.3.0-5.oe2303.noarch                                 
  kernel-headers-6.1.19-7.0.0.17.oe2303.x86_64                                  
  keyutils-1.6.3-5.oe2303.x86_64                                                
  krb5-1.20.1-1.oe2303.x86_64                                                   
  libfabric-1.16.1-1.oe2303.x86_64                                              
  libfontenc-1.1.6-1.oe2303.x86_64                                              
  libgfortran-10.3.1-26.oe2303.x86_64                                           
  libmpc-1.3.1-1.oe2303.x86_64                                                  
  libnfsidmap-2:2.6.2-4.oe2303.x86_64                                           
  libpciaccess-0.17-1.oe2303.x86_64                                             
  libpsm2-10.3.58-9.oe2303.x86_64                                               
  libquadmath-10.3.1-26.oe2303.x86_64                                           
  libquadmath-devel-10.3.1-26.oe2303.x86_64                                     
  libxcrypt-devel-4.4.33-1.oe2303.x86_64                                        
  lksctp-tools-1.0.19-2.oe2303.x86_64                                           
  lua-filesystem-1.8.0-1.oe2303.x86_64                                          
  lua-json-1.3.4-1.oe2303.noarch                                                
  lua-lpeg-1.0.2-2.oe2303.x86_64                                                
  lua-posix-35.0-1.oe2303.x86_64                                                
  lua-term-0.07-2.oe2303.x86_64                                                 
  munge-libs-0.5.14-1.oe2303.x86_64                                             
  nfs-utils-2:2.6.2-4.oe2303.x86_64                                             
  nfs-utils-devel-2:2.6.2-4.oe2303.x86_64                                       
  nfs-utils-help-2:2.6.2-4.oe2303.x86_64                                        
  numactl-libs-2.0.16-3.oe2303.x86_64                                           
  openmpi-4.1.4-3.oe2303.x86_64                                                 
  openmpi-devel-4.1.4-3.oe2303.x86_64                                           
  opensm-3.3.24-1.oe2303.x86_64                                                 
  pciutils-3.9.0-1.oe2303.x86_64                                                
  pmix-4.1.2-1.oe2303.x86_64                                                    
  quota-1:4.06-7.oe2303.x86_64                                                  
  rdma-core-41.0-8.oe2303.x86_64                                                
  rpcbind-1.2.6-5.oe2303.x86_64                                                 
  tzdata-java-2022g-3.oe2303.noarch                                             
  xorg-x11-font-utils-1:7.5-44.oe2303.x86_64                                    
  xorg-x11-fonts-others-7.5-25.oe2303.noarch                                    

Complete!
+ ret=0
+ test 0 -ne 0
+ return 0
++ whereis openmpi
++ awk '{print$2}'
+ mpi_path=/usr/lib64/openmpi
+ echo 'export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin'
+ echo 'export LD_LIBRARY_PATH=:/usr/lib64/openmpi'
+ source /root/.bashrc
++ alias 'rm=rm -i'
++ alias 'cp=cp -i'
++ alias 'mv=mv -i'
++ '[' -f /etc/bashrc ']'
++ . /etc/bashrc
+++ '[' -z '' ']'
+++ BASHRCSOURCED=Y
+++ '[' '' ']'
+++ shopt -q login_shell
++++ umask
+++ '[' 0022 -eq 0 ']'
+++ SHELL=/bin/bash
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/00-modulepath.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/00-modulepath.sh
++++ '[' -z '' ']'
+++++ readlink /etc/alternatives/modules.sh
++++ '[' '' = /usr/share/lmod/lmod/init/profile -o -f /etc/profile.d/z00_lmod.sh ']'
++++ :
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/alias.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/alias.sh
++++ alias '..=cd ..'
++++ alias '...=cd ../..'
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/color_grep.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/color_grep.sh
++++ /usr/libexec/grepconf.sh -c
++++ alias 'grep=grep --color=auto'
++++ alias 'egrep=egrep --color=auto'
++++ alias 'fgrep=fgrep --color=auto'
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/colorls.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/colorls.sh
++++ '[' '!' -t 0 ']'
++++ return
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/colorxzgrep.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/colorxzgrep.sh
++++ /usr/libexec/grepconf.sh -c
++++ alias 'xzgrep=xzgrep --color=auto'
++++ alias 'xzegrep=xzegrep --color=auto'
++++ alias 'xzfgrep=xzfgrep --color=auto'
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/colorzgrep.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/colorzgrep.sh
++++ '[' -f /usr/libexec/grepconf.sh ']'
++++ /usr/libexec/grepconf.sh -c
++++ alias 'zgrep=zgrep --color=auto'
++++ alias 'zfgrep=zfgrep --color=auto'
++++ alias 'zegrep=zegrep --color=auto'
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/gawk.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/gawk.sh
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/lang.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/lang.sh
++++ unset LANG_backup
+++++ /usr/bin/locale
++++ '[' -n '' ']'
++++ LANG_backup=en_US.UTF-8
++++ for config in /etc/locale.conf "${HOME}/.i18n"
++++ '[' -f /etc/locale.conf ']'
++++ '[' -x /usr/bin/sed ']'
+++++ /usr/bin/sed -r -e 's/^[[:blank:]]*([[:upper:]_]+)=([[:print:][:digit:]\._-]+|"[[:print:][:digit:]\._-]+")/export \1=\2/;t;d' /etc/locale.conf
++++ eval export 'LANG="en_US.UTF-8"'
+++++ export LANG=en_US.UTF-8
+++++ LANG=en_US.UTF-8
++++ for config in /etc/locale.conf "${HOME}/.i18n"
++++ '[' -f /root/.i18n ']'
++++ '[' -n en_US.UTF-8 ']'
++++ LANG=en_US.UTF-8
++++ unset LANG_backup config
++++ '[' -n '' ']'
++++ '[' -n en_US.UTF-8 ']'
++++ '[' unknown = linux ']'
+++ for i in /etc/profile.d/*.sh
+++ '[' -r /etc/profile.d/system-info.sh ']'
+++ '[' '' ']'
+++ . /etc/profile.d/system-info.sh
+++++ uname -r
++++ welcome=6.1.19-7.0.0.17.oe2303.x86_64
+++++ cat /proc/meminfo
+++++ awk '/^MemTotal:/ {printf($2)}'
++++ memory_total=2908636
+++++ cat /proc/meminfo
+++++ awk '/^MemFree:/ { printf($2)}'
++++ memory_free=1992516
+++++ cat /proc/meminfo
+++++ awk '/^Buffers:/ { printf($2)}'
++++ buffers=24636
+++++ cat /proc/meminfo
+++++ awk '/^Cached:/ { printf($2)}'
++++ cached=704496
+++++ cat /proc/meminfo
+++++ awk '/^SReclaimable:/ { printf($2)}'
++++ sreclaimable=60064
+++++ cat /proc/meminfo
+++++ awk '/^SwapTotal:/ { printf($2)}'
++++ swap_total=0
+++++ cat /proc/meminfo
+++++ awk '/^SwapFree:/ { printf($2)}'
++++ swap_free=0
++++ [[ 2908636 -gt 0 ]]
+++++ echo 'scale=1; (2908636 - 1992516 - 24636 - 704496 - 60064) * 100.0 / 2908636'
+++++ bc
++++ memory_usage=4.3
++++ memory_usage=4.3%
++++ [[ 0 -gt 0 ]]
++++ swap_mem=0.0%
+++++ df -h /
+++++ awk '/\// {print $(NF-1)}'
++++ usageof=11%
+++++ awk '{print $1}' /proc/loadavg
++++ load_average=0.41
+++++ whoami
++++ whoiam=root
+++++ date
++++ time_cur='Wed May  3 10:52:51 PM UTC 2023'
+++++ ps aux
+++++ wc -l
++++ processes=113
+++++ users
+++++ wc -w
++++ user_num=0
++++ ip_pre=
++++ '[' -x /sbin/ip ']'
+++++ /sbin/ip a
+++++ grep inet
+++++ grep -v 127.0.0.1
+++++ awk '{print $2}'
+++++ grep -v inet6
++++ ip_pre='10.198.114.1/24
10.0.2.15/24'
++++ echo -e '\n'
++++ echo -e 'Welcome to 6.1.19-7.0.0.17.oe2303.x86_64\n'
++++ echo -e 'System information as of time: \tWed May  3 10:52:51 PM UTC 2023\n'
++++ echo -e 'System load: \t\033[0;33;40m0.41\033[0m'
++++ echo -e 'Processes: \t113'
++++ echo -e 'Memory used: \t4.3%'
++++ echo -e 'Swap used: \t0.0%'
++++ echo -e 'Usage On: \t11%'
++++ for line in $ip_pre
++++ ip_address=10.198.114.1
++++ echo -e 'IP address: \t10.198.114.1'
++++ for line in $ip_pre
++++ ip_address=10.0.2.15
++++ echo -e 'IP address: \t10.0.2.15'
++++ echo -e 'Users online: \t0'
++++ '[' root = root ']'
++++ echo -e '\n'
+++ unset i
+++ unset -f pathmunge
++ export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin
++ PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin
++ export LD_LIBRARY_PATH=:/usr/lib64/openmpi
++ LD_LIBRARY_PATH=:/usr/lib64/openmpi
+ hostname node1
oe_test_openmpi_cluster.sh: line 30: hostname: command not found
+ echo '10.198.114.1 node1'
+ echo '10.198.114.3 node2'
+ SSH_CMD '
    echo '\''export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin:/usr/lib64/openmpi/bin\nexport LD_LIBRARY_PATH=:/usr/lib64/openmpi:/usr/lib64/openmpi'\'' >> ~/.bashrc
    source ~/.bashrc
    hostname node2;
    echo '\''10.198.114.1 node1\n10.198.114.3 node2'\'' >> /etc/hosts;
    ' 10.198.114.3 'openEuler12#$' root
+ cmd='
    echo '\''export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin:/usr/lib64/openmpi/bin\nexport LD_LIBRARY_PATH=:/usr/lib64/openmpi:/usr/lib64/openmpi'\'' >> ~/.bashrc
    source ~/.bashrc
    hostname node2;
    echo '\''10.198.114.1 node1\n10.198.114.3 node2'\'' >> /etc/hosts;
    '
+ remoteip=10.198.114.3
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c '
    echo '\''export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin:/usr/lib64/openmpi/bin\nexport LD_LIBRARY_PATH=:/usr/lib64/openmpi:/usr/lib64/openmpi'\'' >> ~/.bashrc
    source ~/.bashrc
    hostname node2;
    echo '\''10.198.114.1 node1\n10.198.114.3 node2'\'' >> /etc/hosts;
    ' -i 10.198.114.3 -u root -p 'openEuler12#$' -t 300 -o 22
Wed May  3 22:52:51 2023 - WARN  - the remote user uses the default configuration.
Wed May  3 22:52:52 2023 - WARN  - the remote password uses the default configuration.
Wed May  3 22:52:52 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@10.198.114.3 
    echo 'export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib64/openmpi/bin:/usr/lib64/openmpi/bin
export LD_LIBRARY_PATH=:/usr/lib64/openmpi:/usr/lib64/openmpi' >> ~/.bashrc
    source ~/.bashrc
    hostname node2;
    echo '10.198.114.1 node1
10.198.114.3 node2' >> /etc/hosts;
    

Authorized users only. All activities may be monitored and reported.
root@10.198.114.3's password: 
bash: line 5: hostname: command not found
+ ret=0
+ test 0 -ne 0
+ return 0
+ ping -c 3 node2
PING node2 (10.198.114.3) 56(84) bytes of data.
64 bytes from node2 (10.198.114.3): icmp_seq=1 ttl=64 time=0.566 ms
64 bytes from node2 (10.198.114.3): icmp_seq=2 ttl=64 time=1.82 ms
64 bytes from node2 (10.198.114.3): icmp_seq=3 ttl=64 time=0.763 ms

--- node2 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2005ms
rtt min/avg/max/mdev = 0.566/1.049/1.819/0.550 ms
+ SSH_CMD 'ping -c 3 node1;rm -rf ~/.ssh/*;
    ' 10.198.114.3 'openEuler12#$' root
+ cmd='ping -c 3 node1;rm -rf ~/.ssh/*;
    '
+ remoteip=10.198.114.3
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c 'ping -c 3 node1;rm -rf ~/.ssh/*;
    ' -i 10.198.114.3 -u root -p 'openEuler12#$' -t 300 -o 22
Wed May  3 22:52:56 2023 - WARN  - the remote user uses the default configuration.
Wed May  3 22:52:56 2023 - WARN  - the remote password uses the default configuration.
Wed May  3 22:52:56 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@10.198.114.3 ping -c 3 node1;rm -rf ~/.ssh/*;
    

Authorized users only. All activities may be monitored and reported.
root@10.198.114.3's password: 
PING node1 (10.198.114.1) 56(84) bytes of data.
64 bytes from node1 (10.198.114.1): icmp_seq=1 ttl=64 time=1.18 ms
64 bytes from node1 (10.198.114.1): icmp_seq=2 ttl=64 time=1.69 ms
64 bytes from node1 (10.198.114.1): icmp_seq=3 ttl=64 time=1.71 ms

--- node1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2007ms
rtt min/avg/max/mdev = 1.182/1.526/1.709/0.243 ms
+ ret=0
+ test 0 -ne 0
+ return 0
+ rm -rf /root/.ssh/known_hosts /root/.ssh/known_hosts.old
+ ssh-keygen -t rsa -P '' -f /root/.ssh/id_rsa
Generating public/private rsa key pair.
Your identification has been saved in /root/.ssh/id_rsa
Your public key has been saved in /root/.ssh/id_rsa.pub
The key fingerprint is:
SHA256:q7Ep6oJ/7CS1vvNRplSqYRO/ZPB408uLSSQVAA7E+cI root@localhost.localdomain
The key's randomart image is:
+---[RSA 3072]----+
|+.o....          |
| =     .         |
|. o o . .        |
| E . B +         |
|  . B @ S        |
|   o % B o       |
|. ..+ * +        |
|o  +=. O .       |
| ++++=B .        |
+----[SHA256]-----+
+ test -f /root/.ssh/id_rsa.pub
+ expect '-c
        log_file testlog
        spawn ssh-copy-id -i /root/.ssh/id_rsa.pub node2
        expect {
                "*)?"  {
                        send "yes\r"
                        exp_continue
                }
                "*assword:*"  {
                        send "openEuler12#$\r"
                        exp_continue
                }
    }
    '
spawn ssh-copy-id -i /root/.ssh/id_rsa.pub node2
/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"
yes
The authenticity of host 'node2 (10.198.114.3)' can't be established.
ED25519 key fingerprint is SHA256:M6IZ/zy3MxMo6/o/fy+aY4RQYnH9M5BZVPilD5Busik.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
yes
/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
yes

Authorized users only. All activities may be monitored and reported.
root@node2's password: 

Number of key(s) added: 1

Now try logging into the machine, with:   "ssh 'node2'"
and check to make sure that only the key(s) you wanted were added.

yes
+ rm -rf /home/mpi_volumn
+ mkdir -p /home/mpi_volumn
+ echo '/home/mpi_volumn 10.198.114.1 (rw,sync,no_root_squash,no_subtree_check,insecure)'
+ systemctl start nfs
+ systemctl stop firewalld
Failed to stop firewalld.service: Unit firewalld.service not loaded.
+ iptable -F
oe_test_openmpi_cluster.sh: line 65: iptable: command not found
+ SSH_CMD '
    rm -rf /home/mpi_volumn && mkdir -p /home/mpi_volumn;
    systemctl stop firewalld;
    mount -t nfs 10.198.114.1:/home/mpi_volumn /home/mpi_volumn;
    ' 10.198.114.3 'openEuler12#$' root
+ cmd='
    rm -rf /home/mpi_volumn && mkdir -p /home/mpi_volumn;
    systemctl stop firewalld;
    mount -t nfs 10.198.114.1:/home/mpi_volumn /home/mpi_volumn;
    '
+ remoteip=10.198.114.3
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c '
    rm -rf /home/mpi_volumn && mkdir -p /home/mpi_volumn;
    systemctl stop firewalld;
    mount -t nfs 10.198.114.1:/home/mpi_volumn /home/mpi_volumn;
    ' -i 10.198.114.3 -u root -p 'openEuler12#$' -t 300 -o 22
Wed May  3 22:53:08 2023 - WARN  - the remote user uses the default configuration.
Wed May  3 22:53:09 2023 - WARN  - the remote password uses the default configuration.
Wed May  3 22:53:09 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@10.198.114.3 
    rm -rf /home/mpi_volumn && mkdir -p /home/mpi_volumn;
    systemctl stop firewalld;
    mount -t nfs 10.198.114.1:/home/mpi_volumn /home/mpi_volumn;
    
The authenticity of host '10.198.114.3 (10.198.114.3)' can't be established.
ED25519 key fingerprint is SHA256:M6IZ/zy3MxMo6/o/fy+aY4RQYnH9M5BZVPilD5Busik.
This host key is known by the following other names/addresses:
    ~/.ssh/known_hosts:1: node2
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '10.198.114.3' (ED25519) to the list of known hosts.

Authorized users only. All activities may be monitored and reported.
Failed to stop firewalld.service: Unit firewalld.service not loaded.
send: spawn id exp3 not open
    while executing
"send "openEuler12#$\r""
    invoked from within
"expect {
            "Are you sure you want to continue connecting*"
            {
                send "yes\r"
                expect "*\[P|p]assword..."
+ ret=1
+ test 1 -ne 0
+ LOG_ERROR 'Failed in remote CMD operation:1'
+ message='Failed in remote CMD operation:1'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'Failed in remote CMD operation:1'
Wed May  3 22:53:12 2023 - ERROR - Failed in remote CMD operation:1
+ return 1
+ touch /home/mpi_volumn/hello_world
+ SSH_CMD 'test -f /home/mpi_volumn/hello_world || exit 1;
    ' 10.198.114.3 'openEuler12#$' root
+ cmd='test -f /home/mpi_volumn/hello_world || exit 1;
    '
+ remoteip=10.198.114.3
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c 'test -f /home/mpi_volumn/hello_world || exit 1;
    ' -i 10.198.114.3 -u root -p 'openEuler12#$' -t 300 -o 22
Wed May  3 22:53:12 2023 - WARN  - the remote user uses the default configuration.
Wed May  3 22:53:13 2023 - WARN  - the remote password uses the default configuration.
Wed May  3 22:53:13 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@10.198.114.3 test -f /home/mpi_volumn/hello_world || exit 1;
    

Authorized users only. All activities may be monitored and reported.
+ ret=0
+ test 0 -ne 0
+ return 0
+ cp -rf ./test.c /home/mpi_volumn/
+++ dirname oe_test_openmpi_cluster.sh
++ cd .
++ pwd
+ casepath=/root/mugen/testcases/cli-test/openmpi
+ LOG_INFO 'Finish preparing the test environment.'
+ message='Finish preparing the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish preparing the test environment.'
Wed May  3 22:53:14 2023 - INFO  - Finish preparing the test environment.
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Wed May  3 22:53:14 2023 - INFO  - Start to run test.
+ cd /home/mpi_volumn/
+ mpicc test.c -o testfile
+ test -f testfile
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ mpirun --allow-run-as-root -np 2 -host node1,node2 ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 0 -eq 2
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 90'
+ message='oe_test_openmpi_cluster.sh line 90'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 90'
Wed May  3 22:53:20 2023 - ERROR - oe_test_openmpi_cluster.sh line 90
+ '[' 0 -eq 1 ']'
+ return 0
+ printf 'node1 slots=2\nnode2 slots=2'
++ mpirun --allow-run-as-root --oversubscribe -np 4 -hostfile myhostfile ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 0 -eq 4
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 94'
+ message='oe_test_openmpi_cluster.sh line 94'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 94'
Wed May  3 22:53:25 2023 - ERROR - oe_test_openmpi_cluster.sh line 94
+ '[' 0 -eq 1 ']'
+ return 0
++ mpirun --allow-run-as-root --oversubscribe -np 2 -H node1,node2 -npersocket 1 ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 0 -eq 2
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 97'
+ message='oe_test_openmpi_cluster.sh line 97'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 97'
Wed May  3 22:53:29 2023 - ERROR - oe_test_openmpi_cluster.sh line 97
+ '[' 0 -eq 1 ']'
+ return 0
++ mpirun --allow-run-as-root --oversubscribe -np 2 -H node1,node2 -npernode 1 ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 0 -eq 2
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 100'
+ message='oe_test_openmpi_cluster.sh line 100'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 100'
Wed May  3 22:53:33 2023 - ERROR - oe_test_openmpi_cluster.sh line 100
+ '[' 0 -eq 1 ']'
+ return 0
++ mpirun --allow-run-as-root --oversubscribe -np 2 -H node1,node2 -pernode ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 0 -eq 2
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 103'
+ message='oe_test_openmpi_cluster.sh line 103'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 103'
Wed May  3 22:53:37 2023 - ERROR - oe_test_openmpi_cluster.sh line 103
+ '[' 0 -eq 1 ']'
+ return 0
++ mpirun --allow-run-as-root --oversubscribe -np 4 --byslot --hostfile myhostfile ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 0 -eq 4
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 106'
+ message='oe_test_openmpi_cluster.sh line 106'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 106'
Wed May  3 22:53:42 2023 - ERROR - oe_test_openmpi_cluster.sh line 106
+ '[' 0 -eq 1 ']'
+ return 0
++ mpirun --allow-run-as-root --mca rmaps_base_schedule_policy slot -np 4 ./testfile
++ grep -c 'processor node1'
+ test 0 -eq 4
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 109'
+ message='oe_test_openmpi_cluster.sh line 109'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 109'
Wed May  3 22:53:45 2023 - ERROR - oe_test_openmpi_cluster.sh line 109
+ '[' 0 -eq 1 ']'
+ return 0
++ mpirun --allow-run-as-root --oversubscribe -np 4 --bynode --hostfile myhostfile ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 0 -eq 4
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 112'
+ message='oe_test_openmpi_cluster.sh line 112'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 112'
Wed May  3 22:53:49 2023 - ERROR - oe_test_openmpi_cluster.sh line 112
+ '[' 0 -eq 1 ']'
+ return 0
++ grep -c 'processor node1'
++ mpirun --allow-run-as-root --mca rmaps_base_schedule_policy node -np 4 ./testfile
+ test 0 -eq 4
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 115'
+ message='oe_test_openmpi_cluster.sh line 115'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 115'
Wed May  3 22:53:52 2023 - ERROR - oe_test_openmpi_cluster.sh line 115
+ '[' 0 -eq 1 ']'
+ return 0
+ mkdir /tmp/bak_mpi_volumn
+ cp -r /home/mpi_volumn/testfile /tmp/bak_mpi_volumn
++ mpirun --allow-run-as-root --wdir /tmp/bak_mpi_volumn ./testfile
++ grep -c 'processor node1'
+ test 0 -eq 4
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 120'
+ message='oe_test_openmpi_cluster.sh line 120'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 120'
Wed May  3 22:53:55 2023 - ERROR - oe_test_openmpi_cluster.sh line 120
+ '[' 0 -eq 1 ']'
+ return 0
+ mpirun --allow-run-as-root -d ./testfile
+ grep MPIR_debug_state
  MPIR_debug_state = 1
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ mpirun --allow-run-as-root -np 4 --report-bindings --map-by core --bind-to core ./testfile
++ grep -c core
+ test 4 -eq 4
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ printf 'rank 0=node1 slot=1\nrank 1=node2 slot=1'
++ mpirun --allow-run-as-root --oversubscribe -H node1,node2 -rf myrankfile ./testfile
++ grep -c -e 'processor node1' -e 'processor node2'
+ test 0 -eq 2
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 129'
+ message='oe_test_openmpi_cluster.sh line 129'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 129'
Wed May  3 22:54:05 2023 - ERROR - oe_test_openmpi_cluster.sh line 129
+ '[' 0 -eq 1 ']'
+ return 0
++ mpirun --allow-run-as-root --prefix /usr/lib64/openmpi -H node2 ./testfile
++ grep -c 'processor node2'
+ test 0 -eq 1
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 132'
+ message='oe_test_openmpi_cluster.sh line 132'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 132'
Wed May  3 22:54:09 2023 - ERROR - oe_test_openmpi_cluster.sh line 132
+ '[' 0 -eq 1 ']'
+ return 0
+ ompi-clean -v
+ grep 'cleaning session'
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 134'
+ message='oe_test_openmpi_cluster.sh line 134'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 134'
Wed May  3 22:54:10 2023 - ERROR - oe_test_openmpi_cluster.sh line 134
+ '[' 0 -eq 1 ']'
+ return 0
+ ompi-clean -d
+ grep 'user(pid)=0'
+ CHECK_RESULT 1
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 136'
+ message='oe_test_openmpi_cluster.sh line 136'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 136'
Wed May  3 22:54:10 2023 - ERROR - oe_test_openmpi_cluster.sh line 136
+ '[' 0 -eq 1 ']'
+ return 0
+ SLEEP_WAIT 1
+ ompi-dvm --allow-run-as-root -report-uri dvm_uri
+ wait_time=1
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 1 --cmd '' --mode 1
+ grep 10.198.114.1 dvm_uri
grep: dvm_uri: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_openmpi_cluster.sh line 140'
+ message='oe_test_openmpi_cluster.sh line 140'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_openmpi_cluster.sh line 140'
Wed May  3 22:54:12 2023 - ERROR - oe_test_openmpi_cluster.sh line 140
+ '[' 0 -eq 1 ']'
+ return 0
+ SLEEP_WAIT 1
+ ompi-server -d
+ wait_time=1
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 1 --cmd '' --mode 1
+ grep 'up and running' ./ompi-server.result
[localhost.localdomain:06318] [[51233,0],0] orte-server: up and running!
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ ompi-server -r server_uri
+ SLEEP_WAIT 1
+ wait_time=1
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 1 --cmd '' --mode 1
+ grep 10.198.114.1 server_uri
3359244288.0;tcp://10.198.114.1,10.0.2.15:38789
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'End of the test.'
+ message='End of the test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End of the test.'
Wed May  3 22:54:15 2023 - INFO  - End of the test.
+ CASE_RESULT 0
+ case_re=0
+ test -z 15
+ test 15 -gt 0
+ LOG_ERROR 'failed to execute the case.'
+ message='failed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'failed to execute the case.'
Wed May  3 22:54:15 2023 - ERROR - failed to execute the case.
+ exit 15
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Wed May  3 22:54:15 2023 - INFO  - Start to restore the test environment.
+ pkill -9 ompi
+ cd /root/mugen/testcases/cli-test/openmpi
+ hostname localhost
oe_test_openmpi_cluster.sh: line 156: hostname: command not found
oe_test_openmpi_cluster.sh: line 152:  6318 Killed                  ompi-server -d > ./ompi-server.result 2>&1  (wd: /home/mpi_volumn)
+ rm -rf /home/mpi_volumn /etc/exports ./testlog /tmp/bak_mpi_volumn
+ sed -i /node/d /etc/hosts
+ sed -i /openmpi/d /root/.bashrc
+ source /root/.bashrc
++ alias 'rm=rm -i'
++ alias 'cp=cp -i'
++ alias 'mv=mv -i'
++ '[' -f /etc/bashrc ']'
++ . /etc/bashrc
+++ '[' -z Y ']'
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmpur29u3qe ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmpur29u3qe
+ '[' 0 -ne 0 ']'
+ SSH_CMD 'umount -f /home/mpi_volumn;
    hostname localhost;sed -i '\''/node/d'\'' /etc/hosts;
    sed -i '\''/openmpi/d'\'' ~/.bashrc
    source ~/.bashrc
    ' 10.198.114.3 'openEuler12#$' root
+ cmd='umount -f /home/mpi_volumn;
    hostname localhost;sed -i '\''/node/d'\'' /etc/hosts;
    sed -i '\''/openmpi/d'\'' ~/.bashrc
    source ~/.bashrc
    '
+ remoteip=10.198.114.3
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c 'umount -f /home/mpi_volumn;
    hostname localhost;sed -i '\''/node/d'\'' /etc/hosts;
    sed -i '\''/openmpi/d'\'' ~/.bashrc
    source ~/.bashrc
    ' -i 10.198.114.3 -u root -p 'openEuler12#$' -t 300 -o 22
Wed May  3 22:54:31 2023 - WARN  - the remote user uses the default configuration.
Wed May  3 22:54:31 2023 - WARN  - the remote password uses the default configuration.
Wed May  3 22:54:31 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@10.198.114.3 umount -f /home/mpi_volumn;
    hostname localhost;sed -i '/node/d' /etc/hosts;
    sed -i '/openmpi/d' ~/.bashrc
    source ~/.bashrc
    

Authorized users only. All activities may be monitored and reported.
can't read "expect_out(buffer)": no such variable
    while executing
"end_user "connection to 10.198.114.3 timed out: $expect_out(buffer)\n""
    invoked from within
"expect {
            "Are you sure you want to continue connecting*"
            {
                send "yes\r"
                expect "*\[P|p]assword..."
+ ret=1
+ test 1 -ne 0
+ LOG_ERROR 'Failed in remote CMD operation:1'
+ message='Failed in remote CMD operation:1'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'Failed in remote CMD operation:1'
Wed May  3 22:59:32 2023 - ERROR - Failed in remote CMD operation:1
+ return 1
+ REMOTE_REBOOT_WAIT 10.198.114.3 'openEuler12#$' root
+ node=10.198.114.3
+ waittime='openEuler12#$'
+ '[' 'openEuler12#$x' '!=' x ']'
+ python3 /root/mugen/libs/locallibs/remote_reboot.py wait --node 10.198.114.3 --waittime 'openEuler12#$'
usage: remote_reboot.py reboot|wait [-h] [--node NODE]
remote_reboot.py: error: argument --node: invalid int value: '10.198.114.3'
+ LOG_INFO 'Finish restoring the test environment.'
+ message='Finish restoring the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish restoring the test environment.'
Wed May  3 22:59:33 2023 - INFO  - Finish restoring the test environment.
