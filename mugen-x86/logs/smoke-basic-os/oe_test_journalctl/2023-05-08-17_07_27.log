+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n '' ']'
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start testing...'
+ message='Start testing...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start testing...'
Mon May  8 17:07:29 2023 - INFO  - Start testing...
+ journalctl --no-pager
+ CHECK_RESULT 0 0 0 'journalctl --no-pager failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='journalctl --no-pager failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ cat all_log
+ grep -E 'LVM|NetworkManager'
5月 08 16:53:09 localhost NetworkManager[1279]: <info>  [1683564789.3818] NetworkManager (version 1.32.12-16.oe2303) is starting... (for the first time)
5月 08 16:53:09 localhost NetworkManager[1279]: <info>  [1683564789.3865] Read config: /etc/NetworkManager/NetworkManager.conf
5月 08 16:53:09 localhost NetworkManager[1279]: <info>  [1683564789.5231] bus-manager: acquired D-Bus service "org.freedesktop.NetworkManager"
5月 08 16:53:09 localhost NetworkManager[1279]: <info>  [1683564789.6852] manager[0x55e72a321000]: monitoring kernel firmware directory '/lib/firmware'.
5月 08 16:53:09 localhost dbus-daemon[1270]: [system] Activating via systemd: service name='org.freedesktop.hostname1' unit='dbus-org.freedesktop.hostname1.service' requested by ':1.2' (uid=0 pid=1279 comm="/usr/sbin/NetworkManager --no-daemon")
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.2695] hostname: hostname: using hostnamed
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.2792] dns-mgr[0x55e72a306250]: init: dns=default rc-manager=symlink
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.3500] manager[0x55e72a321000]: rfkill: Wi-Fi hardware radio set enabled
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.3510] manager[0x55e72a321000]: rfkill: WWAN hardware radio set enabled
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.4052] Loaded device plugin: NMAtmManager (/usr/lib64/NetworkManager/1.32.12-16.oe2303/libnm-device-plugin-adsl.so)
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.4180] Loaded device plugin: NMTeamFactory (/usr/lib64/NetworkManager/1.32.12-16.oe2303/libnm-device-plugin-team.so)
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.4216] manager: rfkill: Wi-Fi enabled by radio killswitch; enabled by state file
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.4316] manager: rfkill: WWAN enabled by radio killswitch; enabled by state file
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.4322] manager: Networking is enabled by state file
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.4361] dhcp-init: Using DHCP client 'dhclient'
5月 08 16:53:11 localhost dbus-daemon[1270]: [system] Activating via systemd: service name='org.freedesktop.nm_dispatcher' unit='dbus-org.freedesktop.nm-dispatcher.service' requested by ':1.2' (uid=0 pid=1279 comm="/usr/sbin/NetworkManager --no-daemon")
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.4508] settings: Loaded settings plugin: ifcfg-rh ("/usr/lib64/NetworkManager/1.32.12-16.oe2303/libnm-settings-plugin-ifcfg-rh.so")
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.4527] settings: Loaded settings plugin: keyfile (internal)
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.5046] device (lo): carrier: link connected
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.5150] manager: (lo): new Generic device (/org/freedesktop/NetworkManager/Devices/1)
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.5362] manager: (ens4): new Ethernet device (/org/freedesktop/NetworkManager/Devices/2)
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.5947] device (ens4): state change: unmanaged -> unavailable (reason 'managed', sys-iface-state: 'external')
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.6094] device (ens4): carrier: link connected
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.6687] settings: (ens4): created default wired connection 'Wired connection 1'
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.7125] device (ens4): state change: unavailable -> disconnected (reason 'none', sys-iface-state: 'managed')
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.7235] policy: auto-activating connection 'Wired connection 1' (8f6a0ea3-bb05-34a2-9812-ca23fe5ed75f)
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.7329] device (ens4): Activation: starting connection 'Wired connection 1' (8f6a0ea3-bb05-34a2-9812-ca23fe5ed75f)
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.7365] device (ens4): state change: disconnected -> prepare (reason 'none', sys-iface-state: 'managed')
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.7406] manager: NetworkManager state is now CONNECTING
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.7448] device (ens4): state change: prepare -> config (reason 'none', sys-iface-state: 'managed')
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.7615] device (ens4): state change: config -> ip-config (reason 'none', sys-iface-state: 'managed')
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.7788] dhcp4 (ens4): activation: beginning transaction (timeout in 45 seconds)
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.7962] dhcp4 (ens4): dhclient started with pid 1390
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.9586] dhcp4 (ens4):   address 10.0.2.15
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.9590] dhcp4 (ens4):   plen 24 (255.255.255.0)
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.9594] dhcp4 (ens4):   gateway 10.0.2.2
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.9600] dhcp4 (ens4):   lease time 86400
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.9604] dhcp4 (ens4):   nameserver '10.0.2.3'
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.9610] dhcp4 (ens4): state changed unknown -> bound, address=10.0.2.15
5月 08 16:53:11 localhost NetworkManager[1279]: <info>  [1683564791.9722] device (ens4): state change: ip-config -> ip-check (reason 'none', sys-iface-state: 'managed')
5月 08 16:53:12 localhost NetworkManager[1279]: <info>  [1683564792.0106] device (ens4): state change: ip-check -> secondaries (reason 'none', sys-iface-state: 'managed')
5月 08 16:53:12 localhost NetworkManager[1279]: <info>  [1683564792.0124] device (ens4): state change: secondaries -> activated (reason 'none', sys-iface-state: 'managed')
5月 08 16:53:12 localhost NetworkManager[1279]: <info>  [1683564792.0179] manager: NetworkManager state is now CONNECTED_LOCAL
5月 08 16:53:12 localhost NetworkManager[1279]: <info>  [1683564792.0222] manager: NetworkManager state is now CONNECTED_SITE
5月 08 16:53:12 localhost NetworkManager[1279]: <info>  [1683564792.0231] policy: set 'Wired connection 1' (ens4) as default for IPv4 routing and DNS
5月 08 16:53:12 localhost NetworkManager[1279]: <info>  [1683564792.0694] device (ens4): Activation: successful, device activated.
5月 08 16:53:12 localhost NetworkManager[1279]: <info>  [1683564792.0770] manager: NetworkManager state is now CONNECTED_GLOBAL
5月 08 16:53:12 localhost NetworkManager[1279]: <info>  [1683564792.0859] manager: startup complete
5月 08 16:53:12 localhost NetworkManager[1279]: <info>  [1683564792.2447] policy: set-hostname: set hostname to 'localhost.localdomain' (no hostname found)
5月 08 16:53:13 localhost.localdomain NetworkManager[1279]: <info>  [1683564793.0661] policy: set-hostname: set hostname to 'localhost.localdomain' (no hostname found)
5月 08 16:53:13 localhost.localdomain NetworkManager[1279]: <info>  [1683564793.2881] policy: set 'Wired connection 1' (ens4) as default for IPv6 routing and DNS
5月 08 16:53:13 localhost.localdomain NetworkManager[1279]: <info>  [1683564793.5122] policy: set-hostname: set hostname to 'localhost.localdomain' (no hostname found)
5月 08 16:53:15 localhost.localdomain NetworkManager[1279]: <info>  [1683564795.3156] policy: set-hostname: set hostname to 'localhost.localdomain' (no hostname found)
5月 08 16:53:25 localhost.localdomain systemd[1]: NetworkManager-dispatcher.service: Deactivated successfully.
+ CHECK_RESULT 0 0 0 'grep LVM|NetworkManager failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='grep LVM|NetworkManager failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ journalctl -k --no-pager
+ cat kernel_log
+ grep -i NetworkManager
+ CHECK_RESULT 1 0 1 'NetworkManager exist'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='NetworkManager exist'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ journalctl -b --no-pager
+ CHECK_RESULT 0 0 0 'journalctl -b failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='journalctl -b failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'Finish test!'
+ message='Finish test!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish test!'
Mon May  8 17:07:30 2023 - INFO  - Finish test!
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Mon May  8 17:07:30 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'start environment cleanup.'
+ message='start environment cleanup.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'start environment cleanup.'
Mon May  8 17:07:30 2023 - INFO  - start environment cleanup.
+ rm -rf all_log boot_log kernel_log
+ LOG_INFO 'Finsh environment cleanup! '
+ message='Finsh environment cleanup! '
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finsh environment cleanup! '
Mon May  8 17:07:31 2023 - INFO  - Finsh environment cleanup! 
