+ source ../common/ha.sh
++ source ../common/common_lib.sh
+++ source /root/mugen/libs/locallibs/common_lib.sh
++++ python3 --version
++++ '[' 0 -eq 0 ']'
++++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start environmental preparation.'
+ message='Start environmental preparation.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start environmental preparation.'
Thu May  4 19:13:03 2023 - INFO  - Start environmental preparation.
+ service=pacemaker.service
+ ha_pre
+ systemctl stop firewalld
Failed to stop firewalld.service: Unit firewalld.service not loaded.
+ systemctl disable firewalld
Failed to disable unit: Unit file firewalld.service does not exist.
+ flag=false
++ getenforce
++ grep Enforcing
+ '[' ']'
+ DNF_INSTALL 'corosync pacemaker pcs'
+ pkgs='corosync pacemaker pcs'
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs 'corosync pacemaker pcs' --node 1 --tempfile ''
+ tmpfile2=/tmp/tmphi2ukcvg
+ '[' -z '' ']'
+ tmpfile=/tmp/tmphi2ukcvg
++ hostname
+ hostname=localhost.localdomain
+ hostnamectl set-hostname ha1
+ cp /etc/hosts /etc/hosts_bak
+ echo '10.198.114.1 ha1
10.198.114.3 ha2'
+ echo 'openEuler12#$'
+ passwd --stdin hacluster
Changing password for user hacluster.
passwd: all authentication tokens updated successfully.
+ echo 'totem {
        version: 2
        cluster_name: hacluster
        crypto_cipher: none
        crypto_hash: none
}
logging {         
        fileline: off
        to_stderr: yes
        to_logfile: yes
        logfile: /var/log/cluster/corosync.log
        to_syslog: yes
        debug: off
        logger_subsys {
               subsys: QUORUM
               debug: off
        }
}
quorum {
        provider: corosync_votequorum
        two_node: 1
}
nodelist {
        node {
               name: ha1
               nodeid: 1
               ring0_addr: 10.198.114.1
        }
        node {
               name: ha2
               nodeid: 2
               ring0_addr: 10.198.114.3 
        }
}'
+ P_SSH_CMD --node 2 --cmd '
    systemctl stop firewalld;
    systemctl disable firewalld;
    dnf install -y corosync pacemaker pcs;
    hostnamectl set-hostname ha2;
    echo openEuler12#$ | passwd --stdin hacluster;
    mv /etc/hosts /etc/hosts_bak'
+ python3 /root/mugen/libs/locallibs/ssh_cmd.py --node 2 --cmd '
    systemctl stop firewalld;
    systemctl disable firewalld;
    dnf install -y corosync pacemaker pcs;
    hostnamectl set-hostname ha2;
    echo openEuler12#$ | passwd --stdin hacluster;
    mv /etc/hosts /etc/hosts_bak'
Last metadata expiration check: 0:09:53 ago on Thu 04 May 2023 07:06:09 PM UTC.
Dependencies resolved.
================================================================================
 Package                         Arch    Version              Repository   Size
================================================================================
Installing:
 corosync                        x86_64  3.1.5-1.oe2303       everything  240 k
 pacemaker                       x86_64  2.1.4-1.oe2303       everything  417 k
 pcs                             x86_64  0.11.2-1.oe2303      everything  6.9 M
Installing dependencies:
 cifs-utils                      x86_64  7.0-1.oe2303         OS           70 k
 corosynclib                     x86_64  3.1.5-1.oe2303       everything   38 k
 device-mapper-event             x86_64  8:1.02.182-2.oe2303  OS           43 k
 ding-libs                       x86_64  0.6.1-45.oe2303      OS           93 k
 gssproxy                        x86_64  0.9.1-1.oe2303       OS           94 k
 hostname                        x86_64  3.23-1.oe2303        OS           25 k
 inih                            x86_64  56-1.oe2303          OS           23 k
 keyutils                        x86_64  1.6.3-5.oe2303       OS           53 k
 krb5                            x86_64  1.20.1-1.oe2303      OS           78 k
 libaio                          x86_64  0.3.113-6.oe2303     OS           20 k
 libknet1                        x86_64  1.22-1.oe2303        everything   71 k
 libknet1-compress-bzip2-plugin  x86_64  1.22-1.oe2303        everything  9.4 k
 libknet1-compress-lz4-plugin    x86_64  1.22-1.oe2303        everything  9.8 k
 libknet1-compress-lzma-plugin   x86_64  1.22-1.oe2303        everything  9.6 k
 libknet1-compress-lzo2-plugin   x86_64  1.22-1.oe2303        everything  9.8 k
 libknet1-compress-plugins-all   x86_64  1.22-1.oe2303        everything  6.7 k
 libknet1-compress-zlib-plugin   x86_64  1.22-1.oe2303        everything  9.3 k
 libknet1-compress-zstd-plugin   x86_64  1.22-1.oe2303        everything  9.5 k
 libknet1-crypto-nss-plugin      x86_64  1.22-1.oe2303        everything   14 k
 libknet1-crypto-openssl-plugin  x86_64  1.22-1.oe2303        everything   12 k
 libknet1-crypto-plugins-all     x86_64  1.22-1.oe2303        everything  6.5 k
 libknet1-plugins-all            x86_64  1.22-1.oe2303        everything  6.5 k
 libldb                          x86_64  2.6.1-1.oe2303       OS          172 k
 libnfsidmap                     x86_64  2:2.6.2-4.oe2303     OS           62 k
 libnozzle1                      x86_64  1.22-1.oe2303        everything   27 k
 libqb                           x86_64  2.0.0-1.oe2303       everything   80 k
 libsmbclient                    x86_64  4.17.5-2.oe2303      OS           64 k
 libtalloc                       x86_64  2.3.4-1.oe2303       OS           27 k
 libtdb                          x86_64  1.4.7-1.oe2303       OS           46 k
 libtevent                       x86_64  0.13.0-1.oe2303      OS           38 k
 libwbclient                     x86_64  4.17.5-2.oe2303      OS           35 k
 libxslt                         x86_64  1.1.37-1.oe2303      OS          174 k
 lmdb                            x86_64  0.9.30-2.oe2303      OS           66 k
 lvm2                            x86_64  8:2.03.18-2.oe2303   OS          1.8 M
 net-snmp-libs                   x86_64  1:5.9.1-7.oe2303     OS          617 k
 nfs-utils                       x86_64  2:2.6.2-4.oe2303     OS          296 k
 nspr                            x86_64  4.35.0-2.oe2303      OS          119 k
 nss                             x86_64  3.85.0-2.oe2303      OS          645 k
 nss-softokn                     x86_64  3.85.0-2.oe2303      OS          680 k
 nss-util                        x86_64  3.85.0-2.oe2303      OS          457 k
 pacemaker-cli                   x86_64  2.1.4-1.oe2303       everything  292 k
 pacemaker-cluster-libs          x86_64  2.1.4-1.oe2303       everything  115 k
 pacemaker-libs                  x86_64  2.1.4-1.oe2303       everything  697 k
 pacemaker-schemas               noarch  2.1.4-1.oe2303       everything   68 k
 perl-TimeDate                   noarch  1:2.33-4.oe2303      OS           32 k
 python3-lxml                    x86_64  4.9.1-3.oe2303       OS          1.2 M
 python3-pycurl                  x86_64  7.45.2-1.oe2303      OS           70 k
 python3-tornado                 x86_64  6.1-1.oe2303         everything  725 k
 quota                           x86_64  1:4.06-7.oe2303      OS          223 k
 resource-agents                 x86_64  4.2.0-4.oe2303       everything  431 k
 rpcbind                         x86_64  1.2.6-5.oe2303       OS           45 k
 ruby                            x86_64  3.1.3-133.oe2303     OS          2.9 M
 ruby-irb                        noarch  3.1.3-133.oe2303     OS           66 k
 rubygem-backports               noarch  3.20.1-1.oe2303      everything  192 k
 rubygem-daemons                 noarch  1.4.1-1.oe2303       everything   33 k
 rubygem-ethon                   noarch  0.9.0-2.oe2303       everything   42 k
 rubygem-eventmachine            x86_64  1.2.7-2.oe2303       everything  162 k
 rubygem-ffi                     x86_64  1.10.0-3.oe2303      everything  102 k
 rubygem-json                    x86_64  2.6.1-133.oe2303     OS           47 k
 rubygem-mustermann              noarch  1.1.1-1.oe2303       everything   37 k
 rubygem-open4                   noarch  1.3.4-2.oe2303       everything   15 k
 rubygem-openssl                 x86_64  3.0.1-133.oe2303     OS          140 k
 rubygem-psych                   x86_64  4.0.4-133.oe2303     OS           47 k
 rubygem-rack                    noarch  1:2.2.3.1-1.oe2303   everything   96 k
 rubygem-rack-protection         noarch  2.0.8.1-1.oe2303     everything   20 k
 rubygem-rack-test               noarch  0.8.3-2.oe2303       everything   17 k
 rubygem-rexml                   noarch  3.2.5-133.oe2303     everything   99 k
 rubygem-sinatra                 noarch  1:2.0.8.1-2.oe2303   everything   77 k
 rubygem-tilt                    noarch  2.0.8-5.oe2303       everything   34 k
 rubygem-webrick                 noarch  1.7.0-1.oe2303       everything   63 k
 rubygems                        noarch  3.3.26-133.oe2303    OS          293 k
 samba-client                    x86_64  4.17.5-2.oe2303      OS          5.3 M
 samba-common                    x86_64  4.17.5-2.oe2303      OS           94 k
 thin-provisioning-tools         x86_64  0.9.0-4.oe2303       OS          413 k
 userspace-rcu                   x86_64  0.13.2-1.oe2303      OS           89 k
 xfsprogs                        x86_64  6.1.1-1.oe2303       OS          993 k
Installing weak dependencies:
 lvm2-help                       noarch  8:2.03.18-2.oe2303   OS          327 k
 nfs-utils-help                  x86_64  2:2.6.2-4.oe2303     OS          101 k
 rubygem-bigdecimal              x86_64  3.1.1-133.oe2303     OS           61 k
 rubygem-did_you_mean            noarch  1.6.1-133.oe2303     OS           17 k
 rubygem-io-console              x86_64  0.5.11-133.oe2303    OS           20 k
 rubygem-rdoc                    noarch  6.4.0-133.oe2303     OS          466 k
 tar                             x86_64  2:1.34-4.oe2303      OS          784 k
 thin-provisioning-tools-help    noarch  0.9.0-4.oe2303       OS           25 k
 xfsprogs-xfs_scrub              x86_64  6.1.1-1.oe2303       OS           70 k

Transaction Summary
================================================================================
Install  88 Packages

Total download size: 31 M
Installed size: 106 M
Downloading Packages:
(1/88): ding-libs-0.6.1-45.oe2303.x86_64.rpm     97 kB/s |  93 kB     00:00    
(2/88): gssproxy-0.9.1-1.oe2303.x86_64.rpm      145 kB/s |  94 kB     00:00    
(3/88): hostname-3.23-1.oe2303.x86_64.rpm        99 kB/s |  25 kB     00:00    
(4/88): inih-56-1.oe2303.x86_64.rpm              91 kB/s |  23 kB     00:00    
(5/88): device-mapper-event-1.02.182-2.oe2303.x  20 kB/s |  43 kB     00:02    
(6/88): cifs-utils-7.0-1.oe2303.x86_64.rpm       28 kB/s |  70 kB     00:02    
(7/88): keyutils-1.6.3-5.oe2303.x86_64.rpm      126 kB/s |  53 kB     00:00    
(8/88): libaio-0.3.113-6.oe2303.x86_64.rpm       57 kB/s |  20 kB     00:00    
(9/88): krb5-1.20.1-1.oe2303.x86_64.rpm          90 kB/s |  78 kB     00:00    
(10/88): libnfsidmap-2.6.2-4.oe2303.x86_64.rpm   68 kB/s |  62 kB     00:00    
(11/88): libtalloc-2.3.4-1.oe2303.x86_64.rpm     65 kB/s |  27 kB     00:00    
(12/88): libsmbclient-4.17.5-2.oe2303.x86_64.rp  54 kB/s |  64 kB     00:01    
(13/88): libldb-2.6.1-1.oe2303.x86_64.rpm        85 kB/s | 172 kB     00:02    
(14/88): libtdb-1.4.7-1.oe2303.x86_64.rpm        80 kB/s |  46 kB     00:00    
(15/88): libtevent-0.13.0-1.oe2303.x86_64.rpm    55 kB/s |  38 kB     00:00    
(16/88): libwbclient-4.17.5-2.oe2303.x86_64.rpm  60 kB/s |  35 kB     00:00    
(17/88): lmdb-0.9.30-2.oe2303.x86_64.rpm        102 kB/s |  66 kB     00:00    
(18/88): libxslt-1.1.37-1.oe2303.x86_64.rpm      99 kB/s | 174 kB     00:01    
(19/88): lvm2-help-2.03.18-2.oe2303.noarch.rpm   90 kB/s | 327 kB     00:03    
(20/88): net-snmp-libs-5.9.1-7.oe2303.x86_64.rp 112 kB/s | 617 kB     00:05    
(21/88): nfs-utils-2.6.2-4.oe2303.x86_64.rpm     84 kB/s | 296 kB     00:03    
(22/88): nfs-utils-help-2.6.2-4.oe2303.x86_64.r 105 kB/s | 101 kB     00:00    
(23/88): nspr-4.35.0-2.oe2303.x86_64.rpm         93 kB/s | 119 kB     00:01    
(24/88): nss-3.85.0-2.oe2303.x86_64.rpm         113 kB/s | 645 kB     00:05    
(25/88): nss-softokn-3.85.0-2.oe2303.x86_64.rpm  88 kB/s | 680 kB     00:07    
(26/88): lvm2-2.03.18-2.oe2303.x86_64.rpm       109 kB/s | 1.8 MB     00:17    
(27/88): perl-TimeDate-2.33-4.oe2303.noarch.rpm  68 kB/s |  32 kB     00:00    
(28/88): python3-pycurl-7.45.2-1.oe2303.x86_64.  94 kB/s |  70 kB     00:00    
(29/88): nss-util-3.85.0-2.oe2303.x86_64.rpm     96 kB/s | 457 kB     00:04    
(30/88): rpcbind-1.2.6-5.oe2303.x86_64.rpm      110 kB/s |  45 kB     00:00    
(31/88): quota-4.06-7.oe2303.x86_64.rpm          92 kB/s | 223 kB     00:02    
(32/88): ruby-irb-3.1.3-133.oe2303.noarch.rpm   103 kB/s |  66 kB     00:00    
(33/88): rubygem-bigdecimal-3.1.1-133.oe2303.x8  88 kB/s |  61 kB     00:00    
(34/88): rubygem-did_you_mean-1.6.1-133.oe2303.  30 kB/s |  17 kB     00:00    
(35/88): rubygem-io-console-0.5.11-133.oe2303.x  49 kB/s |  20 kB     00:00    
(36/88): rubygem-json-2.6.1-133.oe2303.x86_64.r  57 kB/s |  47 kB     00:00    
(37/88): rubygem-openssl-3.0.1-133.oe2303.x86_6  75 kB/s | 140 kB     00:01    
(38/88): rubygem-psych-4.0.4-133.oe2303.x86_64.  67 kB/s |  47 kB     00:00    
(39/88): python3-lxml-4.9.1-3.oe2303.x86_64.rpm  95 kB/s | 1.2 MB     00:12    
(40/88): rubygem-rdoc-6.4.0-133.oe2303.noarch.r  98 kB/s | 466 kB     00:04    
(41/88): rubygems-3.3.26-133.oe2303.noarch.rpm  131 kB/s | 293 kB     00:02    
(42/88): samba-common-4.17.5-2.oe2303.x86_64.rp  67 kB/s |  94 kB     00:01    
(43/88): tar-1.34-4.oe2303.x86_64.rpm           103 kB/s | 784 kB     00:07    
(44/88): thin-provisioning-tools-0.9.0-4.oe2303  82 kB/s | 413 kB     00:05    
(45/88): thin-provisioning-tools-help-0.9.0-4.o  80 kB/s |  25 kB     00:00    
(46/88): ruby-3.1.3-133.oe2303.x86_64.rpm       105 kB/s | 2.9 MB     00:28    
(47/88): userspace-rcu-0.13.2-1.oe2303.x86_64.r  84 kB/s |  89 kB     00:01    
(48/88): xfsprogs-xfs_scrub-6.1.1-1.oe2303.x86_  66 kB/s |  70 kB     00:01    
(49/88): corosync-3.1.5-1.oe2303.x86_64.rpm      91 kB/s | 240 kB     00:02    
(50/88): corosynclib-3.1.5-1.oe2303.x86_64.rpm   82 kB/s |  38 kB     00:00    
(51/88): libknet1-1.22-1.oe2303.x86_64.rpm      103 kB/s |  71 kB     00:00    
(52/88): libknet1-compress-bzip2-plugin-1.22-1.  49 kB/s | 9.4 kB     00:00    
(53/88): libknet1-compress-lz4-plugin-1.22-1.oe  51 kB/s | 9.8 kB     00:00    
(54/88): libknet1-compress-lzma-plugin-1.22-1.o  50 kB/s | 9.6 kB     00:00    
(55/88): libknet1-compress-lzo2-plugin-1.22-1.o  46 kB/s | 9.8 kB     00:00    
(56/88): libknet1-compress-plugins-all-1.22-1.o  15 kB/s | 6.7 kB     00:00    
(57/88): libknet1-compress-zlib-plugin-1.22-1.o  47 kB/s | 9.3 kB     00:00    
(58/88): libknet1-compress-zstd-plugin-1.22-1.o  49 kB/s | 9.5 kB     00:00    
(59/88): libknet1-crypto-nss-plugin-1.22-1.oe23  56 kB/s |  14 kB     00:00    
(60/88): libknet1-crypto-openssl-plugin-1.22-1.  47 kB/s |  12 kB     00:00    
(61/88): libknet1-crypto-plugins-all-1.22-1.oe2  34 kB/s | 6.5 kB     00:00    
(62/88): libknet1-plugins-all-1.22-1.oe2303.x86  34 kB/s | 6.5 kB     00:00    
(63/88): libnozzle1-1.22-1.oe2303.x86_64.rpm     88 kB/s |  27 kB     00:00    
(64/88): libqb-2.0.0-1.oe2303.x86_64.rpm         75 kB/s |  80 kB     00:01    
(65/88): xfsprogs-6.1.1-1.oe2303.x86_64.rpm      97 kB/s | 993 kB     00:10    
(66/88): pacemaker-2.1.4-1.oe2303.x86_64.rpm    118 kB/s | 417 kB     00:03    
(67/88): pacemaker-cluster-libs-2.1.4-1.oe2303. 105 kB/s | 115 kB     00:01    
(68/88): pacemaker-cli-2.1.4-1.oe2303.x86_64.rp  73 kB/s | 292 kB     00:03    
(69/88): pacemaker-schemas-2.1.4-1.oe2303.noarc  92 kB/s |  68 kB     00:00    
(70/88): pacemaker-libs-2.1.4-1.oe2303.x86_64.r  91 kB/s | 697 kB     00:07    
(71/88): python3-tornado-6.1-1.oe2303.x86_64.rp  96 kB/s | 725 kB     00:07    
(72/88): resource-agents-4.2.0-4.oe2303.x86_64. 110 kB/s | 431 kB     00:03    
(73/88): rubygem-backports-3.20.1-1.oe2303.noar  96 kB/s | 192 kB     00:01    
(74/88): rubygem-daemons-1.4.1-1.oe2303.noarch.  92 kB/s |  33 kB     00:00    
(75/88): rubygem-ethon-0.9.0-2.oe2303.noarch.rp  89 kB/s |  42 kB     00:00    
(76/88): rubygem-eventmachine-1.2.7-2.oe2303.x8 109 kB/s | 162 kB     00:01    
(77/88): rubygem-ffi-1.10.0-3.oe2303.x86_64.rpm 159 kB/s | 102 kB     00:00    
(78/88): rubygem-mustermann-1.1.1-1.oe2303.noar 121 kB/s |  37 kB     00:00    
(79/88): rubygem-open4-1.3.4-2.oe2303.noarch.rp  77 kB/s |  15 kB     00:00    
(80/88): rubygem-rack-2.2.3.1-1.oe2303.noarch.r 139 kB/s |  96 kB     00:00    
(81/88): rubygem-rack-protection-2.0.8.1-1.oe23  36 kB/s |  20 kB     00:00    
(82/88): rubygem-rack-test-0.8.3-2.oe2303.noarc  69 kB/s |  17 kB     00:00    
(83/88): samba-client-4.17.5-2.oe2303.x86_64.rp  95 kB/s | 5.3 MB     00:57    
(84/88): rubygem-rexml-3.2.5-133.oe2303.noarch. 153 kB/s |  99 kB     00:00    
(85/88): rubygem-tilt-2.0.8-5.oe2303.noarch.rpm 111 kB/s |  34 kB     00:00    
(86/88): rubygem-sinatra-2.0.8.1-2.oe2303.noarc 104 kB/s |  77 kB     00:00    
(87/88): rubygem-webrick-1.7.0-1.oe2303.noarch.  97 kB/s |  63 kB     00:00    
(88/88): pcs-0.11.2-1.oe2303.x86_64.rpm          97 kB/s | 6.9 MB     01:12    
--------------------------------------------------------------------------------
Total                                           223 kB/s |  31 MB     02:20     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : ruby-irb-3.1.3-133.oe2303.noarch                      1/88 
  Installing       : rubygem-bigdecimal-3.1.1-133.oe2303.x86_64            2/88 
  Installing       : rubygem-did_you_mean-1.6.1-133.oe2303.noarch          3/88 
  Installing       : rubygem-io-console-0.5.11-133.oe2303.x86_64           4/88 
  Installing       : rubygem-json-2.6.1-133.oe2303.x86_64                  5/88 
  Installing       : rubygem-openssl-3.0.1-133.oe2303.x86_64               6/88 
  Installing       : rubygem-psych-4.0.4-133.oe2303.x86_64                 7/88 
  Installing       : rubygem-rdoc-6.4.0-133.oe2303.noarch                  8/88 
  Installing       : rubygems-3.3.26-133.oe2303.noarch                     9/88 
  Installing       : ruby-3.1.3-133.oe2303.x86_64                         10/88 
  Installing       : libknet1-1.22-1.oe2303.x86_64                        11/88 
  Running scriptlet: libknet1-1.22-1.oe2303.x86_64                        11/88 
  Installing       : libqb-2.0.0-1.oe2303.x86_64                          12/88 
  Installing       : libxslt-1.1.37-1.oe2303.x86_64                       13/88 
  Running scriptlet: libxslt-1.1.37-1.oe2303.x86_64                       13/88 
  Installing       : libtalloc-2.3.4-1.oe2303.x86_64                      14/88 
  Installing       : rubygem-rack-1:2.2.3.1-1.oe2303.noarch               15/88 
  Installing       : nspr-4.35.0-2.oe2303.x86_64                          16/88 
  Installing       : libtevent-0.13.0-1.oe2303.x86_64                     17/88 
  Installing       : corosynclib-3.1.5-1.oe2303.x86_64                    18/88 
  Installing       : libtdb-1.4.7-1.oe2303.x86_64                         19/88 
  Installing       : keyutils-1.6.3-5.oe2303.x86_64                       20/88 
  Installing       : nss-3.85.0-2.oe2303.x86_64                           21/88 
  Running scriptlet: nss-3.85.0-2.oe2303.x86_64                           21/88 
  Installing       : nss-util-3.85.0-2.oe2303.x86_64                      22/88 
  Installing       : nss-softokn-3.85.0-2.oe2303.x86_64                   23/88 
  Installing       : libknet1-crypto-nss-plugin-1.22-1.oe2303.x86_64      24/88 
  Installing       : rubygem-rack-protection-2.0.8.1-1.oe2303.noarch      25/88 
  Installing       : rubygem-ffi-1.10.0-3.oe2303.x86_64                   26/88 
  Installing       : rubygem-tilt-2.0.8-5.oe2303.noarch                   27/88 
  Installing       : rubygem-mustermann-1.1.1-1.oe2303.noarch             28/88 
  Installing       : userspace-rcu-0.13.2-1.oe2303.x86_64                 29/88 
  Running scriptlet: userspace-rcu-0.13.2-1.oe2303.x86_64                 29/88 
  Running scriptlet: rpcbind-1.2.6-5.oe2303.x86_64                        30/88 
  Installing       : rpcbind-1.2.6-5.oe2303.x86_64                        30/88 
  Running scriptlet: rpcbind-1.2.6-5.oe2303.x86_64                        30/88 
Created symlink /etc/systemd/system/multi-user.target.wants/rpcbind.service → /usr/lib/systemd/system/rpcbind.service.
Created symlink /etc/systemd/system/sockets.target.wants/rpcbind.socket → /usr/lib/systemd/system/rpcbind.socket.

  Installing       : libaio-0.3.113-6.oe2303.x86_64                       31/88 
  Installing       : quota-1:4.06-7.oe2303.x86_64                         32/88 
  Running scriptlet: quota-1:4.06-7.oe2303.x86_64                         32/88 
  Installing       : rubygem-sinatra-1:2.0.8.1-2.oe2303.noarch            33/88 
  Installing       : rubygem-ethon-0.9.0-2.oe2303.noarch                  34/88 
  Installing       : rubygem-rack-test-0.8.3-2.oe2303.noarch              35/88 
  Installing       : python3-lxml-4.9.1-3.oe2303.x86_64                   36/88 
  Installing       : libknet1-compress-bzip2-plugin-1.22-1.oe2303.x86_6   37/88 
  Installing       : libknet1-compress-lz4-plugin-1.22-1.oe2303.x86_64    38/88 
  Installing       : libknet1-compress-lzma-plugin-1.22-1.oe2303.x86_64   39/88 
  Installing       : libknet1-compress-lzo2-plugin-1.22-1.oe2303.x86_64   40/88 
  Installing       : libknet1-compress-zlib-plugin-1.22-1.oe2303.x86_64   41/88 
  Installing       : libknet1-compress-zstd-plugin-1.22-1.oe2303.x86_64   42/88 
  Installing       : libknet1-compress-plugins-all-1.22-1.oe2303.x86_64   43/88 
  Installing       : libknet1-crypto-openssl-plugin-1.22-1.oe2303.x86_6   44/88 
  Installing       : libknet1-crypto-plugins-all-1.22-1.oe2303.x86_64     45/88 
  Installing       : libknet1-plugins-all-1.22-1.oe2303.x86_64            46/88 
  Installing       : rubygem-daemons-1.4.1-1.oe2303.noarch                47/88 
  Installing       : rubygem-eventmachine-1.2.7-2.oe2303.x86_64           48/88 
  Installing       : rubygem-rexml-3.2.5-133.oe2303.noarch                49/88 
  Installing       : rubygem-backports-3.20.1-1.oe2303.noarch             50/88 
  Installing       : rubygem-open4-1.3.4-2.oe2303.noarch                  51/88 
  Installing       : rubygem-webrick-1.7.0-1.oe2303.noarch                52/88 
  Installing       : python3-tornado-6.1-1.oe2303.x86_64                  53/88 
  Installing       : pacemaker-schemas-2.1.4-1.oe2303.noarch              54/88 
  Running scriptlet: pacemaker-libs-2.1.4-1.oe2303.x86_64                 55/88 
  Installing       : pacemaker-libs-2.1.4-1.oe2303.x86_64                 55/88 
  Installing       : pacemaker-cluster-libs-2.1.4-1.oe2303.x86_64         56/88 
  Installing       : libnozzle1-1.22-1.oe2303.x86_64                      57/88 
  Running scriptlet: libnozzle1-1.22-1.oe2303.x86_64                      57/88 
  Installing       : thin-provisioning-tools-help-0.9.0-4.oe2303.noarch   58/88 
  Installing       : thin-provisioning-tools-0.9.0-4.oe2303.x86_64        59/88 
  Running scriptlet: tar-2:1.34-4.oe2303.x86_64                           60/88 
  Installing       : tar-2:1.34-4.oe2303.x86_64                           60/88 
  Running scriptlet: tar-2:1.34-4.oe2303.x86_64                           60/88 
  Installing       : python3-pycurl-7.45.2-1.oe2303.x86_64                61/88 
  Installing       : perl-TimeDate-1:2.33-4.oe2303.noarch                 62/88 
  Installing       : nfs-utils-help-2:2.6.2-4.oe2303.x86_64               63/88 
  Installing       : net-snmp-libs-1:5.9.1-7.oe2303.x86_64                64/88 
  Installing       : corosync-3.1.5-1.oe2303.x86_64                       65/88 
  Running scriptlet: corosync-3.1.5-1.oe2303.x86_64                       65/88 
  Installing       : lvm2-help-8:2.03.18-2.oe2303.noarch                  66/88 
  Installing       : lmdb-0.9.30-2.oe2303.x86_64                          67/88 
  Installing       : libldb-2.6.1-1.oe2303.x86_64                         68/88 
  Installing       : libsmbclient-4.17.5-2.oe2303.x86_64                  69/88 
  Installing       : libwbclient-4.17.5-2.oe2303.x86_64                   70/88 
  Installing       : samba-client-4.17.5-2.oe2303.x86_64                  71/88 
  Running scriptlet: samba-client-4.17.5-2.oe2303.x86_64                  71/88 
  Running scriptlet: samba-common-4.17.5-2.oe2303.x86_64                  72/88 
  Installing       : samba-common-4.17.5-2.oe2303.x86_64                  72/88 
  Running scriptlet: samba-common-4.17.5-2.oe2303.x86_64                  72/88 
  Installing       : cifs-utils-7.0-1.oe2303.x86_64                       73/88 
  Installing       : libnfsidmap-2:2.6.2-4.oe2303.x86_64                  74/88 
  Installing       : krb5-1.20.1-1.oe2303.x86_64                          75/88 
  Running scriptlet: krb5-1.20.1-1.oe2303.x86_64                          75/88 
  Installing       : inih-56-1.oe2303.x86_64                              76/88 
  Installing       : xfsprogs-xfs_scrub-6.1.1-1.oe2303.x86_64             77/88 
  Installing       : xfsprogs-6.1.1-1.oe2303.x86_64                       78/88 
  Installing       : hostname-3.23-1.oe2303.x86_64                        79/88 
  Running scriptlet: hostname-3.23-1.oe2303.x86_64                        79/88 
  Installing       : ding-libs-0.6.1-45.oe2303.x86_64                     80/88 
  Installing       : gssproxy-0.9.1-1.oe2303.x86_64                       81/88 
  Running scriptlet: gssproxy-0.9.1-1.oe2303.x86_64                       81/88 
  Running scriptlet: nfs-utils-2:2.6.2-4.oe2303.x86_64                    82/88 
  Installing       : nfs-utils-2:2.6.2-4.oe2303.x86_64                    82/88 
  Running scriptlet: nfs-utils-2:2.6.2-4.oe2303.x86_64                    82/88 
  Installing       : device-mapper-event-8:1.02.182-2.oe2303.x86_64       83/88 
  Running scriptlet: device-mapper-event-8:1.02.182-2.oe2303.x86_64       83/88 
Created symlink /etc/systemd/system/sockets.target.wants/dm-event.socket → /usr/lib/systemd/system/dm-event.socket.

  Installing       : lvm2-8:2.03.18-2.oe2303.x86_64                       84/88 
  Running scriptlet: lvm2-8:2.03.18-2.oe2303.x86_64                       84/88 
Created symlink /etc/systemd/system/sysinit.target.wants/lvm2-monitor.service → /usr/lib/systemd/system/lvm2-monitor.service.
Created symlink /etc/systemd/system/sysinit.target.wants/lvm2-lvmpolld.socket → /usr/lib/systemd/system/lvm2-lvmpolld.socket.

  Installing       : resource-agents-4.2.0-4.oe2303.x86_64                85/88 
  Installing       : pacemaker-cli-2.1.4-1.oe2303.x86_64                  86/88 
  Running scriptlet: pacemaker-cli-2.1.4-1.oe2303.x86_64                  86/88 
  Installing       : pacemaker-2.1.4-1.oe2303.x86_64                      87/88 
  Running scriptlet: pacemaker-2.1.4-1.oe2303.x86_64                      87/88 
  Installing       : pcs-0.11.2-1.oe2303.x86_64                           88/88 
  Running scriptlet: pcs-0.11.2-1.oe2303.x86_64                           88/88 
  Running scriptlet: libwbclient-4.17.5-2.oe2303.x86_64                   88/88 
  Running scriptlet: pcs-0.11.2-1.oe2303.x86_64                           88/88 
/usr/lib/tmpfiles.d/dbus.conf:13: Line references path below legacy directory /var/run/, updating /var/run/dbus/containers → /run/dbus/containers; please update the tmpfiles.d/ drop-in file accordingly.
/usr/lib/tmpfiles.d/resource-agents.conf:1: Line references path below legacy directory /var/run/, updating /var/run/resource-agents → /run/resource-agents; please update the tmpfiles.d/ drop-in file accordingly.

  Verifying        : cifs-utils-7.0-1.oe2303.x86_64                        1/88 
  Verifying        : device-mapper-event-8:1.02.182-2.oe2303.x86_64        2/88 
  Verifying        : ding-libs-0.6.1-45.oe2303.x86_64                      3/88 
  Verifying        : gssproxy-0.9.1-1.oe2303.x86_64                        4/88 
  Verifying        : hostname-3.23-1.oe2303.x86_64                         5/88 
  Verifying        : inih-56-1.oe2303.x86_64                               6/88 
  Verifying        : keyutils-1.6.3-5.oe2303.x86_64                        7/88 
  Verifying        : krb5-1.20.1-1.oe2303.x86_64                           8/88 
  Verifying        : libaio-0.3.113-6.oe2303.x86_64                        9/88 
  Verifying        : libldb-2.6.1-1.oe2303.x86_64                         10/88 
  Verifying        : libnfsidmap-2:2.6.2-4.oe2303.x86_64                  11/88 
  Verifying        : libsmbclient-4.17.5-2.oe2303.x86_64                  12/88 
  Verifying        : libtalloc-2.3.4-1.oe2303.x86_64                      13/88 
  Verifying        : libtdb-1.4.7-1.oe2303.x86_64                         14/88 
  Verifying        : libtevent-0.13.0-1.oe2303.x86_64                     15/88 
  Verifying        : libwbclient-4.17.5-2.oe2303.x86_64                   16/88 
  Verifying        : libxslt-1.1.37-1.oe2303.x86_64                       17/88 
  Verifying        : lmdb-0.9.30-2.oe2303.x86_64                          18/88 
  Verifying        : lvm2-8:2.03.18-2.oe2303.x86_64                       19/88 
  Verifying        : lvm2-help-8:2.03.18-2.oe2303.noarch                  20/88 
  Verifying        : net-snmp-libs-1:5.9.1-7.oe2303.x86_64                21/88 
  Verifying        : nfs-utils-2:2.6.2-4.oe2303.x86_64                    22/88 
  Verifying        : nfs-utils-help-2:2.6.2-4.oe2303.x86_64               23/88 
  Verifying        : nspr-4.35.0-2.oe2303.x86_64                          24/88 
  Verifying        : nss-3.85.0-2.oe2303.x86_64                           25/88 
  Verifying        : nss-softokn-3.85.0-2.oe2303.x86_64                   26/88 
  Verifying        : nss-util-3.85.0-2.oe2303.x86_64                      27/88 
  Verifying        : perl-TimeDate-1:2.33-4.oe2303.noarch                 28/88 
  Verifying        : python3-lxml-4.9.1-3.oe2303.x86_64                   29/88 
  Verifying        : python3-pycurl-7.45.2-1.oe2303.x86_64                30/88 
  Verifying        : quota-1:4.06-7.oe2303.x86_64                         31/88 
  Verifying        : rpcbind-1.2.6-5.oe2303.x86_64                        32/88 
  Verifying        : ruby-3.1.3-133.oe2303.x86_64                         33/88 
  Verifying        : ruby-irb-3.1.3-133.oe2303.noarch                     34/88 
  Verifying        : rubygem-bigdecimal-3.1.1-133.oe2303.x86_64           35/88 
  Verifying        : rubygem-did_you_mean-1.6.1-133.oe2303.noarch         36/88 
  Verifying        : rubygem-io-console-0.5.11-133.oe2303.x86_64          37/88 
  Verifying        : rubygem-json-2.6.1-133.oe2303.x86_64                 38/88 
  Verifying        : rubygem-openssl-3.0.1-133.oe2303.x86_64              39/88 
  Verifying        : rubygem-psych-4.0.4-133.oe2303.x86_64                40/88 
  Verifying        : rubygem-rdoc-6.4.0-133.oe2303.noarch                 41/88 
  Verifying        : rubygems-3.3.26-133.oe2303.noarch                    42/88 
  Verifying        : samba-client-4.17.5-2.oe2303.x86_64                  43/88 
  Verifying        : samba-common-4.17.5-2.oe2303.x86_64                  44/88 
  Verifying        : tar-2:1.34-4.oe2303.x86_64                           45/88 
  Verifying        : thin-provisioning-tools-0.9.0-4.oe2303.x86_64        46/88 
  Verifying        : thin-provisioning-tools-help-0.9.0-4.oe2303.noarch   47/88 
  Verifying        : userspace-rcu-0.13.2-1.oe2303.x86_64                 48/88 
  Verifying        : xfsprogs-6.1.1-1.oe2303.x86_64                       49/88 
  Verifying        : xfsprogs-xfs_scrub-6.1.1-1.oe2303.x86_64             50/88 
  Verifying        : corosync-3.1.5-1.oe2303.x86_64                       51/88 
  Verifying        : corosynclib-3.1.5-1.oe2303.x86_64                    52/88 
  Verifying        : libknet1-1.22-1.oe2303.x86_64                        53/88 
  Verifying        : libknet1-compress-bzip2-plugin-1.22-1.oe2303.x86_6   54/88 
  Verifying        : libknet1-compress-lz4-plugin-1.22-1.oe2303.x86_64    55/88 
  Verifying        : libknet1-compress-lzma-plugin-1.22-1.oe2303.x86_64   56/88 
  Verifying        : libknet1-compress-lzo2-plugin-1.22-1.oe2303.x86_64   57/88 
  Verifying        : libknet1-compress-plugins-all-1.22-1.oe2303.x86_64   58/88 
  Verifying        : libknet1-compress-zlib-plugin-1.22-1.oe2303.x86_64   59/88 
  Verifying        : libknet1-compress-zstd-plugin-1.22-1.oe2303.x86_64   60/88 
  Verifying        : libknet1-crypto-nss-plugin-1.22-1.oe2303.x86_64      61/88 
  Verifying        : libknet1-crypto-openssl-plugin-1.22-1.oe2303.x86_6   62/88 
  Verifying        : libknet1-crypto-plugins-all-1.22-1.oe2303.x86_64     63/88 
  Verifying        : libknet1-plugins-all-1.22-1.oe2303.x86_64            64/88 
  Verifying        : libnozzle1-1.22-1.oe2303.x86_64                      65/88 
  Verifying        : libqb-2.0.0-1.oe2303.x86_64                          66/88 
  Verifying        : pacemaker-2.1.4-1.oe2303.x86_64                      67/88 
  Verifying        : pacemaker-cli-2.1.4-1.oe2303.x86_64                  68/88 
  Verifying        : pacemaker-cluster-libs-2.1.4-1.oe2303.x86_64         69/88 
  Verifying        : pacemaker-libs-2.1.4-1.oe2303.x86_64                 70/88 
  Verifying        : pacemaker-schemas-2.1.4-1.oe2303.noarch              71/88 
  Verifying        : pcs-0.11.2-1.oe2303.x86_64                           72/88 
  Verifying        : python3-tornado-6.1-1.oe2303.x86_64                  73/88 
  Verifying        : resource-agents-4.2.0-4.oe2303.x86_64                74/88 
  Verifying        : rubygem-backports-3.20.1-1.oe2303.noarch             75/88 
  Verifying        : rubygem-daemons-1.4.1-1.oe2303.noarch                76/88 
  Verifying        : rubygem-ethon-0.9.0-2.oe2303.noarch                  77/88 
  Verifying        : rubygem-eventmachine-1.2.7-2.oe2303.x86_64           78/88 
  Verifying        : rubygem-ffi-1.10.0-3.oe2303.x86_64                   79/88 
  Verifying        : rubygem-mustermann-1.1.1-1.oe2303.noarch             80/88 
  Verifying        : rubygem-open4-1.3.4-2.oe2303.noarch                  81/88 
  Verifying        : rubygem-rack-1:2.2.3.1-1.oe2303.noarch               82/88 
  Verifying        : rubygem-rack-protection-2.0.8.1-1.oe2303.noarch      83/88 
  Verifying        : rubygem-rack-test-0.8.3-2.oe2303.noarch              84/88 
  Verifying        : rubygem-rexml-3.2.5-133.oe2303.noarch                85/88 
  Verifying        : rubygem-sinatra-1:2.0.8.1-2.oe2303.noarch            86/88 
  Verifying        : rubygem-tilt-2.0.8-5.oe2303.noarch                   87/88 
  Verifying        : rubygem-webrick-1.7.0-1.oe2303.noarch                88/88 

Installed:
  cifs-utils-7.0-1.oe2303.x86_64                                                
  corosync-3.1.5-1.oe2303.x86_64                                                
  corosynclib-3.1.5-1.oe2303.x86_64                                             
  device-mapper-event-8:1.02.182-2.oe2303.x86_64                                
  ding-libs-0.6.1-45.oe2303.x86_64                                              
  gssproxy-0.9.1-1.oe2303.x86_64                                                
  hostname-3.23-1.oe2303.x86_64                                                 
  inih-56-1.oe2303.x86_64                                                       
  keyutils-1.6.3-5.oe2303.x86_64                                                
  krb5-1.20.1-1.oe2303.x86_64                                                   
  libaio-0.3.113-6.oe2303.x86_64                                                
  libknet1-1.22-1.oe2303.x86_64                                                 
  libknet1-compress-bzip2-plugin-1.22-1.oe2303.x86_64                           
  libknet1-compress-lz4-plugin-1.22-1.oe2303.x86_64                             
  libknet1-compress-lzma-plugin-1.22-1.oe2303.x86_64                            
  libknet1-compress-lzo2-plugin-1.22-1.oe2303.x86_64                            
  libknet1-compress-plugins-all-1.22-1.oe2303.x86_64                            
  libknet1-compress-zlib-plugin-1.22-1.oe2303.x86_64                            
  libknet1-compress-zstd-plugin-1.22-1.oe2303.x86_64                            
  libknet1-crypto-nss-plugin-1.22-1.oe2303.x86_64                               
  libknet1-crypto-openssl-plugin-1.22-1.oe2303.x86_64                           
  libknet1-crypto-plugins-all-1.22-1.oe2303.x86_64                              
  libknet1-plugins-all-1.22-1.oe2303.x86_64                                     
  libldb-2.6.1-1.oe2303.x86_64                                                  
  libnfsidmap-2:2.6.2-4.oe2303.x86_64                                           
  libnozzle1-1.22-1.oe2303.x86_64                                               
  libqb-2.0.0-1.oe2303.x86_64                                                   
  libsmbclient-4.17.5-2.oe2303.x86_64                                           
  libtalloc-2.3.4-1.oe2303.x86_64                                               
  libtdb-1.4.7-1.oe2303.x86_64                                                  
  libtevent-0.13.0-1.oe2303.x86_64                                              
  libwbclient-4.17.5-2.oe2303.x86_64                                            
  libxslt-1.1.37-1.oe2303.x86_64                                                
  lmdb-0.9.30-2.oe2303.x86_64                                                   
  lvm2-8:2.03.18-2.oe2303.x86_64                                                
  lvm2-help-8:2.03.18-2.oe2303.noarch                                           
  net-snmp-libs-1:5.9.1-7.oe2303.x86_64                                         
  nfs-utils-2:2.6.2-4.oe2303.x86_64                                             
  nfs-utils-help-2:2.6.2-4.oe2303.x86_64                                        
  nspr-4.35.0-2.oe2303.x86_64                                                   
  nss-3.85.0-2.oe2303.x86_64                                                    
  nss-softokn-3.85.0-2.oe2303.x86_64                                            
  nss-util-3.85.0-2.oe2303.x86_64                                               
  pacemaker-2.1.4-1.oe2303.x86_64                                               
  pacemaker-cli-2.1.4-1.oe2303.x86_64                                           
  pacemaker-cluster-libs-2.1.4-1.oe2303.x86_64                                  
  pacemaker-libs-2.1.4-1.oe2303.x86_64                                          
  pacemaker-schemas-2.1.4-1.oe2303.noarch                                       
  pcs-0.11.2-1.oe2303.x86_64                                                    
  perl-TimeDate-1:2.33-4.oe2303.noarch                                          
  python3-lxml-4.9.1-3.oe2303.x86_64                                            
  python3-pycurl-7.45.2-1.oe2303.x86_64                                         
  python3-tornado-6.1-1.oe2303.x86_64                                           
  quota-1:4.06-7.oe2303.x86_64                                                  
  resource-agents-4.2.0-4.oe2303.x86_64                                         
  rpcbind-1.2.6-5.oe2303.x86_64                                                 
  ruby-3.1.3-133.oe2303.x86_64                                                  
  ruby-irb-3.1.3-133.oe2303.noarch                                              
  rubygem-backports-3.20.1-1.oe2303.noarch                                      
  rubygem-bigdecimal-3.1.1-133.oe2303.x86_64                                    
  rubygem-daemons-1.4.1-1.oe2303.noarch                                         
  rubygem-did_you_mean-1.6.1-133.oe2303.noarch                                  
  rubygem-ethon-0.9.0-2.oe2303.noarch                                           
  rubygem-eventmachine-1.2.7-2.oe2303.x86_64                                    
  rubygem-ffi-1.10.0-3.oe2303.x86_64                                            
  rubygem-io-console-0.5.11-133.oe2303.x86_64                                   
  rubygem-json-2.6.1-133.oe2303.x86_64                                          
  rubygem-mustermann-1.1.1-1.oe2303.noarch                                      
  rubygem-open4-1.3.4-2.oe2303.noarch                                           
  rubygem-openssl-3.0.1-133.oe2303.x86_64                                       
  rubygem-psych-4.0.4-133.oe2303.x86_64                                         
  rubygem-rack-1:2.2.3.1-1.oe2303.noarch                                        
  rubygem-rack-protection-2.0.8.1-1.oe2303.noarch                               
  rubygem-rack-test-0.8.3-2.oe2303.noarch                                       
  rubygem-rdoc-6.4.0-133.oe2303.noarch                                          
  rubygem-rexml-3.2.5-133.oe2303.noarch                                         
  rubygem-sinatra-1:2.0.8.1-2.oe2303.noarch                                     
  rubygem-tilt-2.0.8-5.oe2303.noarch                                            
  rubygem-webrick-1.7.0-1.oe2303.noarch                                         
  rubygems-3.3.26-133.oe2303.noarch                                             
  samba-client-4.17.5-2.oe2303.x86_64                                           
  samba-common-4.17.5-2.oe2303.x86_64                                           
  tar-2:1.34-4.oe2303.x86_64                                                    
  thin-provisioning-tools-0.9.0-4.oe2303.x86_64                                 
  thin-provisioning-tools-help-0.9.0-4.oe2303.noarch                            
  userspace-rcu-0.13.2-1.oe2303.x86_64                                          
  xfsprogs-6.1.1-1.oe2303.x86_64                                                
  xfsprogs-xfs_scrub-6.1.1-1.oe2303.x86_64                                      

Complete!
Changing password for user hacluster.
passwd: all authentication tokens updated successfully.
+ SSH_SCP /etc/hosts root@10.198.114.3:/etc/ 'openEuler12#$'
+ src=/etc/hosts
+ dest=root@10.198.114.3:/etc/
+ remotepasswd='openEuler12#$'
+ connport=22
+ bash /root/mugen/libs/locallibs/sshscp.sh -p 'openEuler12#$' -o 22 -s /etc/hosts -d root@10.198.114.3:/etc/
Thu May  4 19:19:08 2023 - WARN  - the remote password uses the default configuration.
Thu May  4 19:19:08 2023 - WARN  - the connect port using the default configuration
spawn scp -P 22 -r /etc/hosts root@10.198.114.3:/etc/
The authenticity of host '10.198.114.3 (10.198.114.3)' can't be established.
ED25519 key fingerprint is SHA256:M6IZ/zy3MxMo6/o/fy+aY4RQYnH9M5BZVPilD5Busik.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '10.198.114.3' (ED25519) to the list of known hosts.

Authorized users only. All activities may be monitored and reported.
root@10.198.114.3's password: 
hosts                                           0%    0     0.0KB/s   --:-- ETAhosts                                         100%  420    74.6KB/s   00:00    
+ ret=0
+ test 0 -ne 0
+ return 0
+ SSH_SCP /etc/corosync/corosync.conf root@10.198.114.3:/etc/corosync/ 'openEuler12#$'
+ src=/etc/corosync/corosync.conf
+ dest=root@10.198.114.3:/etc/corosync/
+ remotepasswd='openEuler12#$'
+ connport=22
+ bash /root/mugen/libs/locallibs/sshscp.sh -p 'openEuler12#$' -o 22 -s /etc/corosync/corosync.conf -d root@10.198.114.3:/etc/corosync/
Thu May  4 19:19:10 2023 - WARN  - the remote password uses the default configuration.
Thu May  4 19:19:10 2023 - WARN  - the connect port using the default configuration
spawn scp -P 22 -r /etc/corosync/corosync.conf root@10.198.114.3:/etc/corosync/

Authorized users only. All activities may be monitored and reported.
root@10.198.114.3's password: 
corosync.conf                                   0%    0     0.0KB/s   --:-- ETAcorosync.conf                                 100%  697   183.2KB/s   00:00    
+ ret=0
+ test 0 -ne 0
+ return 0
+ systemctl start pcsd
+ systemctl start pacemaker
+ pcs property set stonith-enabled=false
+ pcs property set no-quorum-policy=stop
+ crm_verify -L
+ systemctl start corosync
+ P_SSH_CMD --node 2 --cmd '
    systemctl start pcsd;
    systemctl start pacemaker;
    pcs property set stonith-enabled=false;
    pcs property set no-quorum-policy=stop;
    crm_verify -L;
    systemctl start corosync'
+ python3 /root/mugen/libs/locallibs/ssh_cmd.py --node 2 --cmd '
    systemctl start pcsd;
    systemctl start pacemaker;
    pcs property set stonith-enabled=false;
    pcs property set no-quorum-policy=stop;
    crm_verify -L;
    systemctl start corosync'

+ cat
+ pcs host auth ha1 ha2
Username: Password: ha1: Authorized
ha2: Authorized
+ systemctl restart pacemaker
+ systemctl restart corosync
+ systemctl restart pcsd
+ P_SSH_CMD --node 2 --cmd '
    systemctl restart pacemaker;
    systemctl restart corosync;
    systemctl restart pcsd'
+ python3 /root/mugen/libs/locallibs/ssh_cmd.py --node 2 --cmd '
    systemctl restart pacemaker;
    systemctl restart corosync;
    systemctl restart pcsd'

+ LOG_INFO 'End of environmental preparation!'
+ message='End of environmental preparation!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End of environmental preparation!'
Thu May  4 19:20:47 2023 - INFO  - End of environmental preparation!
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start testing...'
+ message='Start testing...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start testing...'
Thu May  4 19:20:47 2023 - INFO  - Start testing...
+ test_execution pacemaker.service
+ service=pacemaker.service
++ date '+%Y-%m-%d %T'
+ log_time='2023-05-04 19:20:47'
+ test_restart pacemaker.service
+ service=pacemaker.service
+ systemctl restart pacemaker.service
+ CHECK_RESULT 0 0 0 'pacemaker.service restart failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='pacemaker.service restart failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ systemctl status pacemaker.service
+ grep 'Active: active'
     Active: active (running) since Thu 2023-05-04 19:20:47 UTC; 5s ago
+ CHECK_RESULT 0 0 0 'pacemaker.service restart failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='pacemaker.service restart failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ systemctl stop pacemaker.service
+ CHECK_RESULT 0 0 0 'pacemaker.service stop failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='pacemaker.service stop failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ systemctl status pacemaker.service
+ grep 'Active: inactive'
     Active: inactive (dead)
+ CHECK_RESULT 0 0 0 'pacemaker.service stop failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='pacemaker.service stop failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ systemctl start pacemaker.service
+ CHECK_RESULT 0 0 0 'pacemaker.service start failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='pacemaker.service start failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ systemctl status pacemaker.service
+ grep 'Active: active'
     Active: active (running) since Thu 2023-05-04 19:20:59 UTC; 5s ago
+ CHECK_RESULT 0 0 0 'pacemaker.service start failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='pacemaker.service start failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ test_enabled pacemaker.service
+ service=pacemaker.service
++ systemctl is-enabled pacemaker.service
+ state=disabled
+ '[' disabled == enabled ']'
+ '[' disabled == disabled ']'
++ systemctl enable pacemaker.service
++ grep 'Created symlink'
++ awk '{print $3}'
+ symlink_file=/etc/systemd/system/multi-user.target.wants/pacemaker.service
+ find /etc/systemd/system/multi-user.target.wants/pacemaker.service
/etc/systemd/system/multi-user.target.wants/pacemaker.service
+ CHECK_RESULT 0 0 0 'pacemaker.service enable failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='pacemaker.service enable failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ systemctl disable pacemaker.service
Removed /etc/systemd/system/multi-user.target.wants/pacemaker.service.
+ find /etc/systemd/system/multi-user.target.wants/pacemaker.service
find: ‘/etc/systemd/system/multi-user.target.wants/pacemaker.service’: No such file or directory
+ CHECK_RESULT 1 0 1 'pacemaker.service disable failed'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='pacemaker.service disable failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ journalctl --since '2023-05-04 19:20:47' -u pacemaker.service
+ grep -i 'fail\|error'
+ grep -v -i 'DEBUG\|INFO\|WARNING'
+ CHECK_RESULT 1 0 1 'There is an error message for the log of pacemaker.service'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='There is an error message for the log of pacemaker.service'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ test_reload pacemaker.service
+ service=pacemaker.service
+ systemctl start pacemaker.service
+ systemctl reload pacemaker.service
+ grep 'Job type reload is not applicable'
Failed to reload pacemaker.service: Job type reload is not applicable for unit pacemaker.service.
+ CHECK_RESULT 0 0 0 'Job type reload is not applicable for unit pacemaker.service'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Job type reload is not applicable for unit pacemaker.service'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ systemctl status pacemaker.service
+ grep 'Active: active'
     Active: active (running) since Thu 2023-05-04 19:20:59 UTC; 7s ago
+ LOG_INFO 'Finish test!'
+ message='Finish test!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish test!'
Thu May  4 19:21:07 2023 - INFO  - Finish test!
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Thu May  4 19:21:07 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'start environment cleanup.'
+ message='start environment cleanup.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'start environment cleanup.'
Thu May  4 19:21:07 2023 - INFO  - start environment cleanup.
+ ha_post
+ systemctl stop corosync
+ systemctl stop pacemaker
+ systemctl stop pcsd
+ rm -rf /etc/hosts /etc/corosync/corosync.conf
+ mv /etc/hosts_bak /etc/hosts
+ hostnamectl set-hostname localhost.localdomain
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmphi2ukcvg ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmphi2ukcvg
+ '[' 0 -ne 0 ']'
+ '[' false = true ']'
+ systemctl start firewalld
Failed to start firewalld.service: Unit firewalld.service not found.
+ systemctl enable firewalld
Failed to enable unit: Unit file firewalld.service does not exist.
+ P_SSH_CMD --node 2 --cmd '
    systemctl stop corosync;
    systemctl stop pacemaker;
    systemctl stop pcsd;
    rm -rf /etc/hosts /etc/corosync/corosync.conf;
    mv /etc/hosts_bak /etc/hosts;
    hostnamectl set-hostname localhost.localdomain;
    dnf remove -y corosync pacemaker pcs;
    systemctl start firewalld;
    systemctl enable firewalld'
+ python3 /root/mugen/libs/locallibs/ssh_cmd.py --node 2 --cmd '
    systemctl stop corosync;
    systemctl stop pacemaker;
    systemctl stop pcsd;
    rm -rf /etc/hosts /etc/corosync/corosync.conf;
    mv /etc/hosts_bak /etc/hosts;
    hostnamectl set-hostname localhost.localdomain;
    dnf remove -y corosync pacemaker pcs;
    systemctl start firewalld;
    systemctl enable firewalld'
Failed to start firewalld.service: Unit firewalld.service not found.
Failed to enable unit: Unit file firewalld.service does not exist.
+ LOG_INFO 'Finish environment cleanup!'
+ message='Finish environment cleanup!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish environment cleanup!'
Thu May  4 19:21:49 2023 - INFO  - Finish environment cleanup!
