+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start to prepare the test environment.'
+ message='Start to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to prepare the test environment.'
Thu Jun 22 08:31:43 2023 - INFO  - Start to prepare the test environment.
+ DNF_INSTALL 'rubygem-ZenTest tar rubygem-minitest rubygem-test-unit nodejs ruby-devel rubygem-rails bc'
+ pkgs='rubygem-ZenTest tar rubygem-minitest rubygem-test-unit nodejs ruby-devel rubygem-rails bc'
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs 'rubygem-ZenTest tar rubygem-minitest rubygem-test-unit nodejs ruby-devel rubygem-rails bc' --node 1 --tempfile ''
+ tmpfile2=/tmp/tmp2_gom17o
+ '[' -z '' ']'
+ tmpfile=/tmp/tmp2_gom17o
+ yum groupinstall 'Development Tools' -y
Last metadata expiration check: 0:04:27 ago on Thu 22 Jun 2023 08:29:04 AM CST.
Module or Group 'Development Tools' is not available.
Error: Nothing to do.
+ tar -xvf ./common/data.tar.gz
+ LOG_INFO 'End to prepare the test environment.'
+ message='End to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to prepare the test environment.'
Thu Jun 22 08:33:32 2023 - INFO  - End to prepare the test environment.
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Thu Jun 22 08:33:33 2023 - INFO  - Start to run test.
+ zentest -h
+ grep 'ZenTest scans your target'
ZenTest scans your target and unit-test code and writes your missing
+ CHECK_RESULT 0 0 0 'Check zentest -h failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check zentest -h failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ zentest -v
++ rpm -qa rubygem-ZenTest
++ awk -F - '{print $3}'
+ grep 4.12.1
+ CHECK_RESULT 1 0 0 'Check zentest -v failed'
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log='Check zentest -v failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n 'Check zentest -v failed'
+ LOG_ERROR 'Check zentest -v failed'
+ message='Check zentest -v failed'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'Check zentest -v failed'
Thu Jun 22 08:33:37 2023 - ERROR - Check zentest -v failed
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_zentest_zentest.sh line 30'
+ message='oe_test_zentest_zentest.sh line 30'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_zentest_zentest.sh line 30'
Thu Jun 22 08:33:38 2023 - ERROR - oe_test_zentest_zentest.sh line 30
+ '[' 0 -eq 1 ']'
+ return 0
+ zentest ./data/example1.rb ./data/example2.rb
+ grep 'Code Generated by ZenTest'
# Code Generated by ZenTest v. 4.12.0
+ CHECK_RESULT 0 0 0 'Check zentest basic failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check zentest basic failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ zentest -e ./data/example1.rb
+ grep NotImplementedError
NotImplementedError: Need to write test_do_something
+ CHECK_RESULT 0 0 0 'Check zentest -e failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check zentest -e failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ zentest -t ./data/example1.rb
+ grep 'class TestThingy < Test::Unit::TestCase'
class TestThingy < Test::Unit::TestCase
+ CHECK_RESULT 0 0 0 'Check zentest -t failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Check zentest -t failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ autotest -h
+ grep 'Continuous testing for your ruby app'
oe_test_zentest_zentest.sh: line 37: autotest: command not found
+ CHECK_RESULT 1 0 0 'Check autotest -h failed'
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log='Check autotest -h failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n 'Check autotest -h failed'
+ LOG_ERROR 'Check autotest -h failed'
+ message='Check autotest -h failed'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'Check autotest -h failed'
Thu Jun 22 08:33:47 2023 - ERROR - Check autotest -h failed
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_zentest_zentest.sh line 38'
+ message='oe_test_zentest_zentest.sh line 38'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_zentest_zentest.sh line 38'
Thu Jun 22 08:33:48 2023 - ERROR - oe_test_zentest_zentest.sh line 38
+ '[' 0 -eq 1 ']'
+ return 0
++ ruby --version
++ awk '{print $2}'
++ cut -c1-3
+ version=3.1
++ echo '3.1 >= 2.6'
++ bc
+ [[ 1 -eq 1 ]]
++ echo '3.1 < 4.0'
++ bc
+ [[ 1 -eq 1 ]]
+ rails new demo
      create  
      create  README.md
      create  Rakefile
      create  .ruby-version
      create  config.ru
      create  .gitignore
      create  .gitattributes
      create  Gemfile
         run  git init from "."
hint: Using 'master' as the name for the initial branch. This default branch name
hint: is subject to change. To configure the initial branch name to use in all
hint: of your new repositories, which will suppress this warning, call:
hint: 
hint: 	git config --global init.defaultBranch <name>
hint: 
hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
hint: 'development'. The just-created branch can be renamed via this command:
hint: 
hint: 	git branch -m <name>
Initialized empty Git repository in /root/mugen/testcases/cli-test/rubygem-ZenTest/demo/.git/
      create  app
      create  app/assets/config/manifest.js
      create  app/assets/stylesheets/application.css
      create  app/channels/application_cable/channel.rb
      create  app/channels/application_cable/connection.rb
      create  app/controllers/application_controller.rb
      create  app/helpers/application_helper.rb
      create  app/jobs/application_job.rb
      create  app/mailers/application_mailer.rb
      create  app/models/application_record.rb
      create  app/views/layouts/application.html.erb
      create  app/views/layouts/mailer.html.erb
      create  app/views/layouts/mailer.text.erb
      create  app/assets/images
      create  app/assets/images/.keep
      create  app/controllers/concerns/.keep
      create  app/models/concerns/.keep
      create  bin
      create  bin/rails
      create  bin/rake
      create  bin/setup
      create  config
      create  config/routes.rb
      create  config/application.rb
      create  config/environment.rb
      create  config/cable.yml
      create  config/puma.rb
      create  config/storage.yml
      create  config/environments
      create  config/environments/development.rb
      create  config/environments/production.rb
      create  config/environments/test.rb
      create  config/initializers
      create  config/initializers/assets.rb
      create  config/initializers/content_security_policy.rb
      create  config/initializers/cors.rb
      create  config/initializers/filter_parameter_logging.rb
      create  config/initializers/inflections.rb
      create  config/initializers/new_framework_defaults_7_0.rb
      create  config/initializers/permissions_policy.rb
      create  config/locales
      create  config/locales/en.yml
      create  config/master.key
      append  .gitignore
      create  config/boot.rb
      create  config/database.yml
      create  db
      create  db/seeds.rb
      create  lib
      create  lib/tasks
      create  lib/tasks/.keep
      create  lib/assets
      create  lib/assets/.keep
      create  log
      create  log/.keep
      create  public
      create  public/404.html
      create  public/422.html
      create  public/500.html
      create  public/apple-touch-icon-precomposed.png
      create  public/apple-touch-icon.png
      create  public/favicon.ico
      create  public/robots.txt
      create  tmp
      create  tmp/.keep
      create  tmp/pids
      create  tmp/pids/.keep
      create  tmp/cache
      create  tmp/cache/assets
      create  vendor
      create  vendor/.keep
      create  test/fixtures/files
      create  test/fixtures/files/.keep
      create  test/controllers
      create  test/controllers/.keep
      create  test/mailers
      create  test/mailers/.keep
      create  test/models
      create  test/models/.keep
      create  test/helpers
      create  test/helpers/.keep
      create  test/integration
      create  test/integration/.keep
      create  test/channels/application_cable/connection_test.rb
      create  test/test_helper.rb
      create  test/system
      create  test/system/.keep
      create  test/application_system_test_case.rb
      create  storage
      create  storage/.keep
      create  tmp/storage
      create  tmp/storage/.keep
      remove  config/initializers/cors.rb
      remove  config/initializers/new_framework_defaults_7_0.rb
         run  bundle install
Don't run Bundler as root. Bundler can ask for sudo if it is needed, and
installing your bundle as root will break this application for all non-root
users on this machine.
Fetching gem metadata from https://rubygems.org/.
Resolving dependencies.................................
Using rake 13.0.6
Using builder 3.2.4
Fetching concurrent-ruby 1.2.2
Fetching minitest 5.18.1
Fetching erubi 1.12.0
Fetching mini_portile2 2.8.2
Installing mini_portile2 2.8.2
Installing erubi 1.12.0
Installing minitest 5.18.1
Fetching racc 1.7.1
Using crass 1.0.6
Installing concurrent-ruby 1.2.2
Fetching rack 2.2.7
Installing racc 1.7.1 with native extensions
Fetching nio4r 2.5.9
Installing rack 2.2.7
Installing nio4r 2.5.9 with native extensions
Fetching websocket-extensions 0.1.5
Using marcel 1.0.2
Fetching mini_mime 1.1.2
Installing websocket-extensions 0.1.5
Fetching date 3.3.3
Installing mini_mime 1.1.2
Fetching timeout 0.3.2
Installing date 3.3.3 with native extensions
Installing timeout 0.3.2
Fetching public_suffix 5.0.1
Installing public_suffix 5.0.1
Fetching bindex 0.8.1
Installing bindex 0.8.1 with native extensions
Fetching msgpack 1.7.1
Installing msgpack 1.7.1 with native extensions
Using bundler 2.3.26
Using matrix 0.4.2
Fetching regexp_parser 2.8.1
Installing regexp_parser 2.8.1
Fetching io-console 0.6.0
Installing io-console 0.6.0 with native extensions
Using method_source 1.0.0
Fetching thor 1.2.2
Installing thor 1.2.2
Fetching zeitwerk 2.6.8
Installing zeitwerk 2.6.8
Fetching rexml 3.2.5
Installing rexml 3.2.5
Fetching rubyzip 2.3.2
Installing rubyzip 2.3.2
Fetching websocket 1.2.9
Installing websocket 1.2.9
Fetching sqlite3 1.6.3
Installing sqlite3 1.6.3 with native extensions
Fetching rack-test 2.1.0
Installing rack-test 2.1.0
Fetching i18n 1.14.1
Installing i18n 1.14.1
Fetching tzinfo 2.0.6
Installing tzinfo 2.0.6
Fetching sprockets 4.2.0
Installing sprockets 4.2.0
Fetching websocket-driver 0.7.5
Installing websocket-driver 0.7.5 with native extensions
Fetching net-protocol 0.2.1
Installing net-protocol 0.2.1
Fetching addressable 2.8.4
Installing addressable 2.8.4
Fetching nokogiri 1.15.2
Installing nokogiri 1.15.2 with native extensions
Fetching reline 0.3.5
Installing reline 0.3.5
Fetching selenium-webdriver 4.10.0
Fetching puma 5.6.6
Installing puma 5.6.6 with native extensions
Installing selenium-webdriver 4.10.0
Fetching activesupport 7.0.5
Installing activesupport 7.0.5
Fetching net-pop 0.1.2
Installing net-pop 0.1.2
Fetching net-smtp 0.3.3
Installing net-smtp 0.3.3
Fetching net-imap 0.3.6
Installing net-imap 0.3.6
Fetching irb 1.7.0
Installing irb 1.7.0
Fetching bootsnap 1.16.0
Installing bootsnap 1.16.0 with native extensions
Fetching globalid 1.1.0
Installing globalid 1.1.0
Fetching activemodel 7.0.5
Installing activemodel 7.0.5
Fetching mail 2.8.1
Installing mail 2.8.1
Fetching debug 1.8.0
Installing debug 1.8.0 with native extensions
Fetching activejob 7.0.5
Installing activejob 7.0.5
Fetching activerecord 7.0.5
Installing activerecord 7.0.5
Using rails-dom-testing 2.0.3
Fetching xpath 3.2.0
Fetching loofah 2.21.3
Fetching webdrivers 5.2.0
Installing xpath 3.2.0
Installing webdrivers 5.2.0
Installing loofah 2.21.3
Fetching capybara 3.39.2
Fetching rails-html-sanitizer 1.6.0
Installing rails-html-sanitizer 1.6.0
Fetching actionview 7.0.5
Installing capybara 3.39.2
Installing actionview 7.0.5
Fetching actionpack 7.0.5
Fetching jbuilder 2.11.5
Installing jbuilder 2.11.5
Installing actionpack 7.0.5
Fetching actionmailer 7.0.5
Fetching actioncable 7.0.5
Fetching activestorage 7.0.5
Fetching railties 7.0.5
Installing actionmailer 7.0.5
Installing activestorage 7.0.5
Installing actioncable 7.0.5
Installing railties 7.0.5
Fetching sprockets-rails 3.4.2
Installing sprockets-rails 3.4.2
Fetching actionmailbox 7.0.5
Fetching actiontext 7.0.5
Installing actionmailbox 7.0.5
Installing actiontext 7.0.5
Fetching stimulus-rails 1.2.1
Fetching importmap-rails 1.2.1
Fetching rails 7.0.5
Fetching turbo-rails 1.4.0
Installing rails 7.0.5
Fetching web-console 4.2.0
Installing importmap-rails 1.2.1
Installing stimulus-rails 1.2.1
Installing turbo-rails 1.4.0
Installing web-console 4.2.0
Bundle complete! 15 Gemfile dependencies, 73 gems now installed.
Use `bundle info [gemname]` to see where a bundled gem is installed.
         run  bundle binstubs bundler
Thu Jun 22 09:01:41 2023 - ERROR - Timeout : Command 'bash -x oe_test_zentest_zentest.sh' timed out after 1799.999158331 seconds
       rails  importmap:install
